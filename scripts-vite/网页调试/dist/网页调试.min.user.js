// ==UserScript==
// @name         网页调试
// @namespace    https://greasyfork.org/zh-CN/scripts/475228
// @version      2024.11.11
// @author       WhiteSevs
// @description  内置多种网页调试工具，包括：Eruda、vConsole、PageSpy、Chii，可在设置菜单中进行详细配置
// @license      GPL-3.0-only
// @icon         data:image/png;base64,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
// @supportURL   https://github.com/WhiteSevs/TamperMonkeyScript/issues
// @match        *://*/*
// @require      https://update.greasyfork.org/scripts/494167/1413255/CoverUMD.js
// @require      https://update.greasyfork.org/scripts/483694/1480442/Eruda-2.js
// @require      https://update.greasyfork.org/scripts/483695/1480443/vConsole-2.js
// @require      https://update.greasyfork.org/scripts/483696/1480444/PageSpy-2.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/utils@2.5.1/dist/index.umd.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/domutils@1.4.0/dist/index.umd.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/pops@1.8.9/dist/index.umd.js
// @require      https://fastly.jsdelivr.net/npm/qmsg@1.2.7/dist/index.umd.js
// @resource     Resource_erudaBenchmark       https://fastly.jsdelivr.net/npm/eruda-benchmark@2.0.1
// @resource     Resource_erudaCode            https://fastly.jsdelivr.net/npm/eruda-code@2.2.0
// @resource     Resource_erudaFeatures        https://fastly.jsdelivr.net/npm/eruda-features@2.1.0
// @resource     Resource_erudaGeolocation     https://fastly.jsdelivr.net/gh/WhiteSevs/eruda-geolocation@38b60386bcb6280de4cccac7b31169a2abdb2edf/eruda-geolocation.js
// @resource     Resource_erudaMonitor         https://fastly.jsdelivr.net/npm/eruda-monitor@1.1.1
// @resource     Resource_erudaOrientation     https://fastly.jsdelivr.net/npm/eruda-orientation@2.1.1
// @resource     Resource_erudaOutlinePlugin   https://fastly.jsdelivr.net/npm/eruda-outline-plugin@0.0.5
// @resource     Resource_erudaPixel           https://fastly.jsdelivr.net/npm/eruda-pixel@1.0.13
// @resource     Resource_erudaTiming          https://fastly.jsdelivr.net/npm/eruda-timing@2.0.1
// @resource     Resource_erudaTouches         https://fastly.jsdelivr.net/npm/eruda-touches@2.1.0
// @resource     Resource_erudaVue             https://fastly.jsdelivr.net/npm/eruda-vue@1.1.1
// @resource     Resource_vConsoleVueDevtools  https://fastly.jsdelivr.net/npm/vue-vconsole-devtools@1.0.9
// @connect      *
// @grant        GM_getResourceText
// @grant        GM_getValue
// @grant        GM_info
// @grant        GM_registerMenuCommand
// @grant        GM_setClipboard
// @grant        GM_setValue
// @grant        GM_unregisterMenuCommand
// @grant        GM_xmlhttpRequest
// @grant        unsafeWindow
// @run-at       document-start
// ==/UserScript==

(function (O, ne, B, ee) {
  'use strict';

  var le=Object.defineProperty;var re=(t,a,o)=>a in t?le(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o;var V=(t,a,o)=>re(t,typeof a!="symbol"?a+"":a,o);var S=typeof GM_getResourceText<"u"?GM_getResourceText:void 0,A=typeof GM_getValue<"u"?GM_getValue:void 0,W=typeof GM_info<"u"?GM_info:void 0,ie=typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0,ue=typeof GM_setClipboard<"u"?GM_setClipboard:void 0,z=typeof GM_setValue<"u"?GM_setValue:void 0,se=typeof GM_unregisterMenuCommand<"u"?GM_unregisterMenuCommand:void 0,de=typeof GM_xmlhttpRequest<"u"?GM_xmlhttpRequest:void 0,ce=typeof unsafeWindow<"u"?unsafeWindow:void 0,pe=window;const ge=`{
  "eruda": {
    "version": "3.4.1",
    "plugin": {
      "eruda-monitor": "1.1.1",
      "eruda-features": "2.1.0",
      "eruda-timing": "2.0.1",
      "eruda-code": "2.2.0",
      "eruda-benchmark": "2.0.1",
      "eruda-orientation": "2.1.1",
      "eruda-vue": "1.1.1",
      "eruda-touches": "2.1.0",
      "eruda-outline-plugin": "0.0.5",
      "eruda-pixel": "1.0.13"
    }
  },
  "vconsole": {
    "version": "3.15.1",
    "plugin": {
      "vue-vconsole-devtools": "1.0.9"
    }
  },
  "@huolala-tech/page-spy-browser": {
    "version": "1.9.14"
  }
}`,x=JSON.parse(ge),y={eruda:{version:x.eruda.version,homeUrl:"https://github.com/liriliri/eruda",latestFileUrl:"https://cdn.jsdelivr.net/npm/eruda",settingDocUrl:"https://github.com/liriliri/eruda/blob/master/README.md"},vConsole:{version:x.vconsole.version,homeUrl:"https://github.com/Tencent/vConsole",latestFileUrl:"https://cdn.jsdelivr.net/npm/vconsole",settingDocUrl:"https://github.com/Tencent/vConsole/blob/dev/README_CN.md"},pageSpy:{version:x["@huolala-tech/page-spy-browser"].version,homeUrl:"https://github.com/HuolalaTech/page-spy-web",latestFileUrl:"https://github.com/HuolalaTech/page-spy/tree/main/packages/page-spy-browser",settingDocUrl:"https://github.com/HuolalaTech/page-spy-web/blob/main/README_ZH.md",defaultConfig:{api:"pagespy.jikejishu.com",cliennOrigin:"https://pagespy.jikejishu.com"}},chii:{homeUrl:"https://github.com/liriliri/chii",settingDocUrl:"https://github.com/liriliri/chii/blob/master/README_CN.md",defaultConfig:{url:"https://chii.liriliri.io/",scriptJs:"//chii.liriliri.io/target.js"}}},e={qmsg_config_position:{key:"qmsg-config-position",defaultValue:"bottom"},qmsg_config_maxnums:{key:"qmsg-config-maxnums",defaultValue:3},qmsg_config_showreverse:{key:"qmsg-config-showreverse",defaultValue:!1},httpx_cookie_manager_enable:{key:"httpx-use-cookie-enable",defaultValue:!1},httpx_cookie_manager_use_document_cookie:{key:"httpx-use-document-cookie",defaultValue:!1},debugTool:{key:"currentDebug",defaultValue:"eruda"},allowRunInIframe:{key:"allowRunInIframe",defaultValue:!1},autoLoadDebugTool:{key:"autoLoadDebugTool",defaultValue:!0},eruda_auto_open_panel:{key:"eruda-auto-open-panel",defaultValue:!1},eruda_default_show_panel_name:{key:"eruda-default-show-panel-name",defaultValue:"console"},eruda_panel_console:{key:"eruda-panel-console",defaultValue:!0},eruda_panel_elements:{key:"eruda-panel-elements",defaultValue:!0},eruda_panel_network:{key:"eruda-panel-network",defaultValue:!0},eruda_panel_resources:{key:"eruda-panel-resources",defaultValue:!0},eruda_panel_sources:{key:"eruda-panel-sources",defaultValue:!0},eruda_panel_info:{key:"eruda-panel-info",defaultValue:!0},eruda_panel_snippets:{key:"eruda-panel-snippets",defaultValue:!0},eruda_plugin_Resource_erudaMonitor:{key:"eruda_plugin_Resource_erudaMonitor",defaultValue:!1,resource:"Resource_erudaMonitor"},eruda_plugin_Resource_erudaFeatures:{key:"eruda_plugin_Resource_erudaFeatures",defaultValue:!1,resource:"Resource_erudaFeatures"},eruda_plugin_Resource_erudaTiming:{key:"eruda_plugin_Resource_erudaTiming",defaultValue:!1,resource:"Resource_erudaTiming"},eruda_plugin_Resource_erudaCode:{key:"eruda_plugin_Resource_erudaCode",defaultValue:!1,resource:"Resource_erudaCode"},eruda_plugin_Resource_erudaBenchmark:{key:"eruda_plugin_Resource_erudaBenchmark",defaultValue:!1,resource:"Resource_erudaBenchmark"},eruda_plugin_Resource_erudaGeolocation:{key:"eruda_plugin_Resource_erudaGeolocation",defaultValue:!1,resource:"Resource_erudaGeolocation"},eruda_plugin_Resource_erudaOrientation:{key:"eruda_plugin_Resource_erudaOrientation",defaultValue:!1,resource:"Resource_erudaOrientation"},eruda_plugin_Resource_erudaVue:{key:"eruda_plugin_Resource_erudaVue",defaultValue:!1,resource:"Resource_erudaVue"},eruda_plugin_Resource_erudaTouches:{key:"eruda_plugin_Resource_erudaTouches",defaultValue:!1,resource:"Resource_erudaTouches"},eruda_plugin_Resource_erudaOutlinePlugin:{key:"eruda_plugin_Resource_erudaOutlinePlugin",defaultValue:!1,resource:"Resource_erudaOutlinePlugin"},eruda_plugin_Resource_erudaPixel:{key:"eruda_plugin_Resource_erudaPixel",defaultValue:!1,resource:"Resource_erudaPixel"},vconsole_auto_open_panel:{key:"vconsole-auto-open-panel",defaultValue:!1},vconsole_default_show_panel_name:{key:"vconsole-default-show-panel-name",defaultValue:"default"},vConsole_panel_system:{key:"vConsole-panel-system",defaultValue:!0},vConsole_panel_network:{key:"vConsole-panel-network",defaultValue:!0},vConsole_panel_element:{key:"vConsole-panel-element",defaultValue:!0},vConsole_panel_storage:{key:"vConsole-panel-storage",defaultValue:!0},vConsole_theme:{key:"vConsole-theme",defaultValue:"light"},vconsole_disableLogScrolling:{key:"vconsole-disableLogScrolling",defaultValue:!1},vconsole_showTimestamps:{key:"vconsole-showTimestamps",defaultValue:!1},vconsole_maxLogNumber:{key:"vconsole-maxLogNumber",defaultValue:1e3},vconsole_maxNetworkNumber:{key:"vconsole-maxNetworkNumber",defaultValue:1e3},vConsole_storage_defaultStorages_cookies:{key:"vConsole-storage-defaultStorages-cookies",defaultValue:!0},vConsole_storage_defaultStorages_localStorage:{key:"vConsole-storage-defaultStorages-localStorage",defaultValue:!0},vConsole_storage_defaultStorages_sessionStorage:{key:"vConsole-storage-defaultStorages-sessionStorage",defaultValue:!0},vConsole_plugin_Resource_vConsole_Stats:{key:"vConsole_plugin_Resource_vConsole_Stats",defaultValue:!1},vConsole_plugin_Resource_vConsole_ExportLog:{key:"vConsole_plugin_Resource_vConsole_ExportLog",defaultValue:!1},vConsole_plugin_Resource_vConsoleVueDevtools:{key:"vConsole_plugin_Resource_vConsoleVueDevtools",defaultValue:!1,resource:"Resource_vConsoleVueDevtools"},pagespy_disable_run_in_debug_client:{key:"pagespy-disable-run-in-debug-client",defaultValue:!0},pagespy_api:{key:"pagespy-api",defaultValue:y.pageSpy.defaultConfig.api},pagespy_clientOrigin:{key:"pagespy-clientOrigin",defaultValue:y.pageSpy.defaultConfig.cliennOrigin},pagespy_project:{key:"pagespy-project",defaultValue:"default"},pagespy_title:{key:"pagespy-title",defaultValue:"--"},pagespy_autoRender:{key:"pagespy-autoRender",defaultValue:!0},pagespy_enableSSL:{key:"pagespy-enableSSL",defaultValue:!0},pagespy_offline:{key:"pagespy-offline",defaultValue:!1},pagespy_serializeData:{key:"pagespy-serializeData",defaultValue:!1},pagespy_useSecret:{key:"pagespy-useSecret",defaultValue:!1},pagespy_messageCapacity:{key:"pagespy-messageCapacity",defaultValue:1e3},chii_script_embedded:{key:"chii-script-embedded",defaultValue:!0},chii_disable_run_in_debug_url:{key:"chii-disable-run-in-debug-url",defaultValue:!0},chii_check_script_load:{key:"chii-check-script-load",defaultValue:!0},chii_debug_url:{key:"chii-debug-url",defaultValue:y.chii.defaultConfig.url},chii_target_js:{key:"chii-target-js",defaultValue:y.chii.defaultConfig.scriptJs},chii_embedded_height_enable:{key:"chii-embedded-height-enable",defaultValue:!1},chii_embedded_height:{key:"chii-embedded-height",defaultValue:parseInt((window.innerHeight/2).toString())}};class _e{constructor(a){V(this,"$data",{get enable(){return l.getValue(e.httpx_cookie_manager_enable.key,e.httpx_cookie_manager_enable.defaultValue)},get useDocumentCookie(){return l.getValue(e.httpx_cookie_manager_use_document_cookie.key,e.httpx_cookie_manager_use_document_cookie.defaultValue)},cookieRule:[]});Array.isArray(a)&&(this.$data.cookieRule=a);}fixCookieSplit(a){return v.isNotNull(a)&&!a.trim().endsWith(";")&&(a+=";"),a}concatCookie(a,o){return v.isNull(a)?o:(a=a.trim(),o=o.trim(),a=this.fixCookieSplit(a),o.startsWith(";")&&(o=o.substring(1)),a.concat(o))}handle(a){if(a.fetch||!this.$data.enable)return;let o="",u=a.url;u.startsWith("//")&&(u=window.location.protocol+u);let n=new URL(u);this.$data.useDocumentCookie&&n.hostname.endsWith(window.location.hostname.split(".").slice(-2).join("."))&&(o=this.concatCookie(o,document.cookie.trim()));for(let i=0;i<this.$data.cookieRule.length;i++){let r=this.$data.cookieRule[i];if(n.hostname.match(r.hostname)){let d=l.getValue(r.key);if(v.isNull(d))break;o=this.concatCookie(o,d);}}v.isNotNull(o)&&(a.headers&&a.headers.Cookie?a.headers.Cookie=this.concatCookie(a.headers.Cookie,o):a.headers.Cookie=o,M.info(["Httpx => 设置cookie:",a])),a.headers&&a.headers.Cookie!=null&&v.isNull(a.headers.Cookie)&&delete a.headers.Cookie;}}const fe=new _e([]),C=ce,_=C.console,he="网页调试",v=B.noConflict(),J=ne.noConflict(),Z=ee,M=new v.Log(W,C.console||pe.console);var Q;const Y=((Q=W==null?void 0:W.script)==null?void 0:Q.name)||he,te=!1;M.config({debug:te,logMaxCount:1e3,autoClearConsole:!0,tag:!0});O.config(Object.defineProperties({html:!0,autoClose:!0,showClose:!1},{position:{get(){return l.getValue(e.qmsg_config_position.key,e.qmsg_config_position.defaultValue)}},maxNums:{get(){return l.getValue(e.qmsg_config_maxnums.key,e.qmsg_config_maxnums.defaultValue)}},showReverse:{get(){return l.getValue(e.qmsg_config_showreverse.key,e.qmsg_config_showreverse.defaultValue)}},zIndex:{get(){let t=B.getMaxZIndex(),a=ee.config.InstanceUtils.getPopsMaxZIndex().zIndex;return B.getMaxValue(t,a)+100}}}));const H=new v.GM_Menu({GM_getValue:A,GM_setValue:z,GM_registerMenuCommand:ie,GM_unregisterMenuCommand:se}),X=new v.Httpx(de);X.interceptors.request.use(t=>(fe.handle(t),t));X.interceptors.response.use(void 0,t=>(M.error("拦截器-请求错误",t),t.type==="onabort"?O.warning("请求取消"):t.type==="onerror"?O.error("请求异常"):t.type==="ontimeout"?O.error("请求超时"):O.error("其它错误"),t));X.config({logDetails:te});C.Object.defineProperty,C.Function.prototype.apply,C.Function.prototype.call,C.Element.prototype.appendChild,C.setTimeout;v.addStyle.bind(v);document.querySelector.bind(document);document.querySelectorAll.bind(document);const me=ue||v.setClip.bind(v),I="GM_Panel",ae="data-init",U="data-key",G="data-default-value",ve="data-init-more-value",T="data-storage-api",K={setting:{get width(){return window.innerWidth<550?"88vw":"550px"},get height(){return window.innerHeight<450?"70vh":"450px"}},settingBig:{get width(){return window.innerWidth<800?"92vw":"800px"},get height(){return window.innerHeight<600?"80vh":"600px"}},info:{get width(){return "350px"},get height(){return "250px"}}},q=function(t,a,o,u,n,i){let r=[];typeof u=="function"?r=u():r=u;let d={text:t,type:"select",description:i,attributes:{},props:{},getValue(){return this.props[T].get(a,o)},callback(c,p,s){let f=p;M.info(`选择：${s}`),this.props[T].set(a,f);},data:r};return Reflect.set(d.attributes,U,a),Reflect.set(d.attributes,G,o),Reflect.set(d.props,T,{get(c,p){return l.getValue(c,p)},set(c,p){l.setValue(c,p);}}),d},g=function(t,a,o,u,n,i){let r={text:t,type:"switch",description:n,attributes:{},props:{},getValue(){return !!this.props[T].get(a,o)},callback(d,c){let p=!!c;M.success(`${p?"开启":"关闭"} ${t}`),!(typeof u=="function"&&u(d,p))&&this.props[T].set(a,p);},afterAddToUListCallBack:i};return Reflect.set(r.attributes,U,a),Reflect.set(r.attributes,G,o),Reflect.set(r.props,T,{get(d,c){return l.getValue(d,c)},set(d,c){l.setValue(d,c);}}),r},ye={id:"debug-panel-config-all",title:"总设置",headerTitle:"总设置",forms:[{text:"功能",type:"forms",forms:[q("调试工具",e.debugTool.key,e.debugTool.defaultValue,[{value:"eruda",text:"Eruda"},{value:"vconsole",text:"VConsole"},{value:"pagespy",text:"PageSpy"},{value:"chii",text:"Chii"}],void 0,void 0),g("允许在iframe内加载",e.allowRunInIframe.key,e.allowRunInIframe.defaultValue,void 0,"如果指定本脚本的容器并没有在iframe内执行本脚本，那么该功能将不会生效"),g("主动加载调试工具",e.autoLoadDebugTool.key,e.autoLoadDebugTool.defaultValue,void 0,"关闭后将会在脚本菜单注册按钮，有3种状态【加载并显示调试工具】、【隐藏调试工具】、【显示调试工具】")]}]},F=function(t,a,o,u,n,i,r,d,c,p){let s={text:t,type:"button",attributes:{},description:a,buttonIcon:u,buttonIsRightIcon:n,buttonIconIsLoading:i,buttonType:r,buttonText:o,callback(f){typeof d=="function"&&d(f);},afterAddToUListCallBack:c};return Reflect.set(s.attributes,ae,()=>{s.disable=!!(typeof p=="function"?p():p);}),s},L=function(t,a,o,u,n,i="",r,d){let c={text:t,type:"input",isNumber:!!r,isPassword:!!d,props:{},attributes:{},description:u,getValue(){return this.props[T].get(a,o)},callback(p,s){this.props[T].set(a,s);},placeholder:i};return Reflect.set(c.attributes,U,a),Reflect.set(c.attributes,G,o),Reflect.set(c.props,T,{get(p,s){return l.getValue(p,s)},set(p,s){l.setValue(p,s);}}),c},be={id:"debug-panel-config-vconsole",title:"vConsole",headerTitle:`<a href='${y.vConsole.settingDocUrl}' target='_blank'>vConsole设置</a>`,forms:[{text:"功能",type:"forms",forms:[F("当前版本","",y.vConsole.version,void 0,!1,!1,"primary",t=>{v.preventEvent(t),window.open(y.vConsole.homeUrl,"_blank");}),{type:"own",getLiElementCallBack(t){let a=document.createElement("div");a.className="pops-panel-item-left-text",a.innerHTML=`
                            <p class="pops-panel-item-left-main-text">最新版本</p>
                        `;let o=document.createElement("div");return o.className="pops-panel-item-right-text",o.innerHTML=`
                        <a href="${y.vConsole.homeUrl}" target="_blank">
                            <img src="https://img.shields.io/npm/v/vconsole/latest.svg?label=vConsole" alt="vConsole">
                        </a>
                        `,t.appendChild(a),t.appendChild(o),t}},g("自动打开面板",e.vconsole_auto_open_panel.key,e.vconsole_auto_open_panel.defaultValue,void 0,"加载完毕后自动显示面板内容"),q("默认展示的面板元素",e.vconsole_default_show_panel_name.key,e.vconsole_default_show_panel_name.defaultValue,[{text:"Log",value:"default"},{text:"System",value:"system",disable(){return !l.getValue(e.vConsole_panel_system.key)}},{text:"Network",value:"network",disable(){return !l.getValue(e.vConsole_panel_network.key)}},{text:"Element",value:"element",disable(){return !l.getValue(e.vConsole_panel_element.key)}},{text:"Storage",value:"storage",disable(){return !l.getValue(e.vConsole_panel_storage.key)}},{text:"Stats",value:"stats",disable(){return !l.getValue(e.vConsole_plugin_Resource_vConsole_Stats.key)}},{text:"exportLog",value:"exportlog",disable(){return !l.getValue(e.vConsole_plugin_Resource_vConsole_ExportLog.key)}},{text:"Vue",value:"vue",disable(){return !l.getValue(e.vConsole_plugin_Resource_vConsoleVueDevtools.key)}}],void 0,"开启【自动打开面板】才会生效")]},{text:"面板",type:"forms",forms:[g("System",e.vConsole_panel_system.key,e.vConsole_panel_system.defaultValue,void 0,"控制台"),g("Network",e.vConsole_panel_network.key,e.vConsole_panel_network.defaultValue,void 0,"元素"),g("Element",e.vConsole_panel_element.key,e.vConsole_panel_element.defaultValue,void 0,"网络"),g("Storage",e.vConsole_panel_storage.key,e.vConsole_panel_storage.defaultValue,void 0,"资源")]},{text:"配置",type:"forms",forms:[q("主题",e.vConsole_theme.key,e.vConsole_theme.defaultValue,[{value:"auto",text:"自动"},{value:"light",text:"浅色主题"},{value:"dark",text:"深色主题"}],void 0,void 0),g("禁止Log自动滚动",e.vconsole_disableLogScrolling.key,e.vconsole_disableLogScrolling.defaultValue),g("显示日志的输出时间",e.vconsole_showTimestamps.key,e.vconsole_showTimestamps.defaultValue),L("日志的上限数量",e.vconsole_maxLogNumber.key,e.vconsole_maxLogNumber.defaultValue,"请输入数字",void 0,void 0,!0),L("请求记录的上限数量",e.vconsole_maxNetworkNumber.key,e.vconsole_maxNetworkNumber.defaultValue,"请输入数字",void 0,void 0,!0)]},{text:"Storage配置",type:"forms",forms:[g("Cookies",e.vConsole_storage_defaultStorages_cookies.key,e.vConsole_storage_defaultStorages_cookies.defaultValue,void 0,"显示Cookies"),g("LocalStorage",e.vConsole_storage_defaultStorages_localStorage.key,e.vConsole_storage_defaultStorages_localStorage.defaultValue,void 0,"显示LocalStorage"),g("SessionStorage",e.vConsole_storage_defaultStorages_sessionStorage.key,e.vConsole_storage_defaultStorages_sessionStorage.defaultValue,void 0,"显示SessionStorage")]},{text:"插件",type:"forms",forms:[g("vconsole-stats-plugin",e.vConsole_plugin_Resource_vConsole_Stats.key,e.vConsole_plugin_Resource_vConsole_Stats.defaultValue,void 0,"A vConsole plugin which can show Stats in front-end."),g("vconsole-outputlog-plugin",e.vConsole_plugin_Resource_vConsole_ExportLog.key,e.vConsole_plugin_Resource_vConsole_ExportLog.defaultValue,void 0,"使用该插件可以复制或下载console中打印的log"),g(`
                        <a class="plugin-anchor" href="https://github.com/Zippowxk/vue-vconsole-devtools" target="_blank">
                            <img src="https://img.shields.io/npm/v/vue-vconsole-devtools/latest.svg?label=">
                        </a>
                        vue-vconsole-devtools
                    `,e.vConsole_plugin_Resource_vConsoleVueDevtools.key,e.vConsole_plugin_Resource_vConsoleVueDevtools.defaultValue,void 0,`
                        v${x.vconsole.plugin["vue-vconsole-devtools"]}
                        <br>
                        Vue-vConsole-devtools 是一款vConsole插件，把Vue.js官方调试工具vue-devtools移植到移动端，可以直接在移动端查看调试Vue.js应用
                    `)]}]},ke={id:"debug-panel-config-eruda",title:"Eruda",headerTitle:`<a href='${y.eruda.settingDocUrl}' target='_blank'>Eruda设置</a>`,forms:[{text:"功能",type:"forms",forms:[F("当前版本","",y.eruda.version,void 0,!1,!1,"primary",t=>{v.preventEvent(t),window.open(y.eruda.homeUrl,"_blank");}),{type:"own",getLiElementCallBack(t){let a=document.createElement("div");a.className="pops-panel-item-left-text",a.innerHTML=`
                            <p class="pops-panel-item-left-main-text">最新版本</p>
                        `;let o=document.createElement("div");return o.className="pops-panel-item-right-text",o.innerHTML=`
                        <a href="${y.eruda.homeUrl}" target="_blank">
                            <img src="https://img.shields.io/npm/v/eruda/latest.svg?label=eruda" alt="eruda">
                        </a>
                        `,t.appendChild(a),t.appendChild(o),t}},g("自动打开面板",e.eruda_auto_open_panel.key,e.eruda_auto_open_panel.defaultValue,void 0,"加载完毕后自动显示面板内容"),q("默认展示的面板元素",e.eruda_default_show_panel_name.key,e.eruda_default_show_panel_name.defaultValue,[{text:"Console",value:"console",disable(){return !l.getValue(e.eruda_panel_console.key)}},{text:"Elements",value:"elements",disable(){return !l.getValue(e.eruda_panel_elements.key)}},{text:"Network",value:"network",disable(){return !l.getValue(e.eruda_panel_network.key)}},{text:"Resources",value:"resources",disable(){return !l.getValue(e.eruda_panel_resources.key)}},{text:"Sources",value:"sources",disable(){return !l.getValue(e.eruda_panel_sources.key)}},{text:"Info",value:"info",disable(){return !l.getValue(e.eruda_panel_info.key)}},{text:"Snippets",value:"snippets",disable(){return !l.getValue(e.eruda_panel_snippets.key)}},{text:"Monitor",value:"monitor",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaMonitor.key)}},{text:"Features",value:"features",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaFeatures.key)}},{text:"Timing",value:"timing",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaTiming.key)}},{text:"Code",value:"code",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaCode.key)}},{text:"Benchmark",value:"benchmark",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaBenchmark.key)}},{text:"Geolocation",value:"geolocation",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaGeolocation.key)}},{text:"Orientation",value:"orientation",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaOrientation.key)}},{text:"Touches",value:"touches",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaTouches.key)}},{text:"Outline",value:"outline",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaOutlinePlugin.key)}},{text:"Pixel",value:"pixel",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaPixel.key)}},{text:"Vue",value:"vue",disable(){return !l.getValue(e.eruda_plugin_Resource_erudaVue.key)}},{text:"Settings",value:"settings"}],void 0,"开启【自动打开面板】才会生效")]},{text:"面板",type:"forms",forms:[g("Console",e.eruda_panel_console.key,e.eruda_panel_console.defaultValue,void 0,"控制台"),g("Elements",e.eruda_panel_elements.key,e.eruda_panel_elements.defaultValue,void 0,"元素"),g("Network",e.eruda_panel_network.key,e.eruda_panel_network.defaultValue,void 0,"网络"),g("Resources",e.eruda_panel_resources.key,e.eruda_panel_resources.defaultValue,void 0,"资源"),g("Sources",e.eruda_panel_sources.key,e.eruda_panel_sources.defaultValue,void 0,"源代码"),g("Info",e.eruda_panel_info.key,e.eruda_panel_info.defaultValue,void 0,"信息"),g("Snippets",e.eruda_panel_snippets.key,e.eruda_panel_snippets.defaultValue,void 0,"拓展")]},{text:"插件",type:"forms",forms:[g(`
                    <a class="plugin-anchor" href="https://github.com/liriliri/eruda-monitor" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-monitor/latest.svg?label=">
                    </a>
                    eruda-monitor
                    `,e.eruda_plugin_Resource_erudaMonitor.key,e.eruda_plugin_Resource_erudaMonitor.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-monitor"]}
						<br>
						展示页面的 fps 和内存信息
                    `),g(`
                    <a class="plugin-anchor" href="https://github.com/liriliri/eruda-features" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-features/latest.svg?label=">
                    </a>
                    eruda-features
                    `,e.eruda_plugin_Resource_erudaFeatures.key,e.eruda_plugin_Resource_erudaFeatures.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-features"]}
						<br>
						浏览器特性检测
                    `),g(`
                    <a class="plugin-anchor" href="https://github.com/liriliri/eruda-timing" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-timing/latest.svg?label=">
                    </a>
                    eruda-timing
                    `,e.eruda_plugin_Resource_erudaTiming.key,e.eruda_plugin_Resource_erudaTiming.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-timing"]}
						<br>
						展示性能资源数据
                    `),g(`
                    <a class="plugin-anchor" href="https://github.com/liriliri/eruda-code" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-code/latest.svg?label=">
                    </a>
                    eruda-code
                    `,e.eruda_plugin_Resource_erudaCode.key,e.eruda_plugin_Resource_erudaCode.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-code"]}
						<br>
						运行 JavaScript 代码
                    `),g(`
                    <a class="plugin-anchor" href="https://github.com/liriliri/eruda-benchmark" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-benchmark/latest.svg?label=">
                    </a>
                    eruda-benchmark
                    `,e.eruda_plugin_Resource_erudaBenchmark.key,e.eruda_plugin_Resource_erudaBenchmark.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-benchmark"]}
						<br>
						运行 JavaScript 性能测试
                    `),g("eruda-geolocation",e.eruda_plugin_Resource_erudaGeolocation.key,e.eruda_plugin_Resource_erudaGeolocation.defaultValue,void 0,"测试地理位置接口"),g(`
                    <a class="plugin-anchor" href="https://github.com/liriliri/eruda-orientation" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-orientation/latest.svg?label=">
                    </a>
                    eruda-orientation
                    `,e.eruda_plugin_Resource_erudaOrientation.key,e.eruda_plugin_Resource_erudaOrientation.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-orientation"]}
						<br>
						测试重力感应接口
                    `),g(`
                    <a class="plugin-anchor" href="https://github.com/liriliri/eruda-vue" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-vue/latest.svg?label=">
                    </a>
                    eruda-vue
                    `,e.eruda_plugin_Resource_erudaVue.key,e.eruda_plugin_Resource_erudaVue.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-vue"]}
						<br>
						Vue调试工具
                    `),g(`
                    <a class="plugin-anchor" href="https://github.com/liriliri/eruda-touches" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-touches/latest.svg?label=">
                    </a>
                    eruda-touches
                    `,e.eruda_plugin_Resource_erudaTouches.key,e.eruda_plugin_Resource_erudaTouches.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-touches"]}
						<br>
						可视化屏幕 Touch 事件触发
                    `),g(`
                    <a class="plugin-anchor" href="https://github.com/pomelo-chuan/eruda-outline-plugin" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-outline-plugin/latest.svg?label=">
                    </a>
                    eruda-outline-plugin
                    `,e.eruda_plugin_Resource_erudaOutlinePlugin.key,e.eruda_plugin_Resource_erudaOutlinePlugin.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-outline-plugin"]}
						<br>
						给页面的元素添加边框
					`),g(`
                    <a class="plugin-anchor" href="https://github.com/Faithree/eruda-pixel" target="_blank">
                        <img src="https://img.shields.io/npm/v/eruda-pixel/latest.svg?label=">
                    </a>
                    eruda-pixel
                    `,e.eruda_plugin_Resource_erudaPixel.key,e.eruda_plugin_Resource_erudaPixel.defaultValue,void 0,`
						v${x.eruda.plugin["eruda-pixel"]}
						<br>
						高精度的UI恢复辅助工具
                    `)]}]},Ve={id:"debug-panel-config-pagespy",title:"PageSpy",headerTitle:`<a href='${y.pageSpy.settingDocUrl}' target='_blank'>PageSpy设置</a>`,forms:[{text:"功能",type:"forms",forms:[F("注意！隐私保护！","","了解详情",void 0,!1,!1,"danger",t=>{Z.confirm({title:{text:"提示",position:"center"},content:{text:`下面默认配置的${y.pageSpy.defaultConfig.api}是仅供测试使用的，其他人也可以看到你的调试信息，包括Cookie等信息，如果想用，请自己搭建一个调试端`},btn:{reverse:!0,position:"end",ok:{text:"前往了解更多",callback(){window.open("https://github.com/HuolalaTech/page-spy-web/wiki/%F0%9F%90%9E-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94#user-content-testjikejishucom-%E6%98%AF%E5%AE%98%E6%96%B9%E6%8F%90%E4%BE%9B%E7%9A%84%E5%9F%9F%E5%90%8D%E5%90%97%E4%B8%80%E7%9B%B4%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%90%97","_blank");}}},mask:{enable:!0},width:K.info.width,height:K.info.height});},void 0),F("当前版本","",y.pageSpy.version,void 0,!1,!1,"primary",t=>{v.preventEvent(t),window.open(y.pageSpy.homeUrl,"_blank");}),{type:"own",getLiElementCallBack(t){let a=document.createElement("div");a.className="pops-panel-item-left-text",a.innerHTML=`
                            <p class="pops-panel-item-left-main-text">最新版本</p>
                        `;let o=document.createElement("div");return o.className="pops-panel-item-right-text",o.innerHTML=`
                        <a href="${y.pageSpy.homeUrl}" target="_blank">
                            <img src="https://img.shields.io/npm/v/@huolala-tech/page-spy-browser?label=pagespy" alt="page-spy-browser">
                        </a>
                        `,t.appendChild(a),t.appendChild(o),t}},g("禁止在调试端运行",e.pagespy_disable_run_in_debug_client.key,e.pagespy_disable_run_in_debug_client.defaultValue,void 0,"调试端是下面配置的api/clientOrigin地址")]},{text:"配置",type:"forms",forms:[L("api",e.pagespy_api.key,e.pagespy_api.defaultValue,"",void 0,"服务器地址的 Host"),L("clientOrigin",e.pagespy_clientOrigin.key,e.pagespy_clientOrigin.defaultValue,"",void 0,"服务器地址的 Origin"),L("project",e.pagespy_project.key,e.pagespy_project.defaultValue,void 0,void 0,"项目名称"),L("title",e.pagespy_title.key,e.pagespy_title.defaultValue,void 0,void 0,"自定义标题"),g("autoRender",e.pagespy_autoRender.key,e.pagespy_autoRender.defaultValue,void 0,"自动渲染「圆形白底带 Logo」"),q("enableSSL",e.pagespy_enableSSL.key,e.pagespy_enableSSL.defaultValue,[{value:null,text:"默认(自动分析)"},{value:!0,text:"开启"},{value:!1,text:"关闭"}],void 0,"是否https"),g("offline",e.pagespy_offline.key,e.pagespy_offline.defaultValue,void 0,'是否进入 "离线模式"，具体表现为 PageSpy 不会创建房间、建立 WebSocket 连接。'),g("serializeData",e.pagespy_serializeData.key,e.pagespy_serializeData.defaultValue,void 0,"是否允许 SDK 在收集离线日志时，序列化非基本类型的数据，序列化的目的是方便在回放时查看"),g("useSecret",e.pagespy_useSecret.key,e.pagespy_useSecret.defaultValue,void 0,"是否启用权限认证功能。启用后，SDK 会生成 6 位数的随机 “密钥”；调试端进入房间时要求输入对应的密钥"),L("messageCapacity",e.pagespy_messageCapacity.key,e.pagespy_messageCapacity.defaultValue,"调试端进入房间后可以看到之前的数据量的大小",void 0,"指定 SDK 在本地最多缓存多少条数据记录")]}]},Ce=function(t,a,o,u,n,i,r,d,c){let p={text:t,type:"slider",description:d,attributes:{},props:{},getValue(){return this.props[T].get(a,o)},getToolTipContent(s){return typeof r=="function"?r(s):`${s}`},callback(s,f){typeof i=="function"&&i(s,f)||this.props[T].set(a,f);},min:u,max:n,step:c};return Reflect.set(p.attributes,U,a),Reflect.set(p.attributes,G,o),Reflect.set(p.props,T,{get(s,f){return l.getValue(s,f)},set(s,f){l.setValue(s,f);}}),p},xe={id:"debug-panel-config-chii",title:"Chii",headerTitle:`<a href='${y.chii.settingDocUrl}' target='_blank'>Chii设置</a>`,forms:[{text:"功能",type:"forms",forms:[F("调试页面","","前往",void 0,!1,!1,"primary",t=>{let a=l.getValue("chii-debug-url",y.chii.defaultConfig.url);window.open(a,"_blank");},void 0,()=>!!l.getValue(e.chii_script_embedded.key,e.chii_script_embedded.defaultValue))]},{text:"配置",type:"forms",forms:[g("本页展示",e.chii_script_embedded.key,e.chii_script_embedded.defaultValue,(t,a)=>{let u=t.target.getRootNode().querySelector("li.pops-panel-forms-container-item ul > li > .pops-panel-button button");a?u.setAttribute("disabled","true"):u.removeAttribute("disabled");},"将调试器展示在同一页面中"),g("禁止在调试端运行",e.chii_disable_run_in_debug_url.key,e.chii_disable_run_in_debug_url.defaultValue,void 0,"调试端是下面配置的【调试页面Url】"),g("检测script加载",e.chii_check_script_load.key,e.chii_check_script_load.defaultValue,void 0,"失败会有alert提示弹出"),L("调试页面Url",e.chii_debug_url.key,e.chii_debug_url.defaultValue,"请输入链接Url",void 0,"配置【调试页面】的Url"),L("来源js",e.chii_target_js.key,e.chii_target_js.defaultValue,"请输入目标js文件",void 0,"用于注入页面来进行调试")]},{text:"本页展示的配置",type:"forms",forms:[g("锁定高度",e.chii_embedded_height_enable.key,e.chii_embedded_height_enable.defaultValue,void 0,"开启后将自动覆盖面板高度"),Ce("高度设定",e.chii_embedded_height.key,e.chii_embedded_height.defaultValue,0,parseInt(window.innerHeight.toString()),(t,a)=>{let o=document.querySelector(".__chobitsu-hide__:has(iframe)");o&&(o.style.height=a+"px");},t=>t+"px","可覆盖当前页面Chii面板的高度",1)]}]},l={$data:{__data:null,__oneSuccessExecMenu:null,__onceExec:null,__listenData:null,get data(){return l.$data.__data==null&&(l.$data.__data=new v.Dictionary),l.$data.__data},get oneSuccessExecMenu(){return l.$data.__oneSuccessExecMenu==null&&(l.$data.__oneSuccessExecMenu=new v.Dictionary),l.$data.__oneSuccessExecMenu},get onceExec(){return l.$data.__onceExec==null&&(l.$data.__onceExec=new v.Dictionary),l.$data.__onceExec},get scriptName(){return Y},key:I,attributeKeyName:U,attributeDefaultValueName:G},$listener:{get listenData(){return l.$data.__listenData==null&&(l.$data.__listenData=new v.Dictionary),l.$data.__listenData}},init(){let t=this.getPanelContentConfig();this.initPanelConfigDefaultValue([...t]),this.registerMenu();},isTopWindow(){return window.top===window.self},registerMenu(){this.isTopWindow()&&H.add([{key:"show_pops_panel_setting",text:"⚙ 设置",autoReload:!1,isStoreValue:!1,showText(t){return t},callback:()=>{this.showPanel();}}]);},initPanelConfigDefaultValue(t){let a=this;function o(n){if(!n.attributes)return;let i={},r=n.attributes[U];r!=null&&(i[r]=n.attributes[G]);let d=n.attributes[ae];if(typeof d=="function"){let s=d();if(typeof s=="boolean"&&!s)return}let c=n.attributes[ve];c&&typeof c=="object"&&Object.assign(i,c);let p=Object.keys(i);if(!p.length){n.type!=="button"&&M.warn("请先配置键",n);return}p.forEach(s=>{let f=i[s];a.$data.data.has(s)&&M.warn("请检查该key(已存在): "+s),a.$data.data.set(s,f);});}function u(n){for(let i=0;i<n.length;i++){let r=n[i];o(r);let d=r.forms;d&&Array.isArray(d)&&u(d);}}for(let n=0;n<t.length;n++){let i=t[n];if(!i.forms)continue;let r=i.forms;r&&Array.isArray(r)&&u(r);}},setValue(t,a){let o=A(I,{}),u=o[t];o[t]=a,z(I,o),this.$listener.listenData.has(t)&&this.$listener.listenData.get(t).callback(t,u,a);},getValue(t,a){let u=A(I,{})[t];return u??(this.$data.data.has(t)?this.$data.data.get(t):a)},deleteValue(t){let a=A(I,{}),o=a[t];Reflect.deleteProperty(a,t),z(I,a),this.$listener.listenData.has(t)&&this.$listener.listenData.get(t).callback(t,o,void 0);},addValueChangeListener(t,a,o){let u=Math.random();return this.$listener.listenData.set(t,{id:u,key:t,callback:a}),o&&o.immediate&&a(t,this.getValue(t),this.getValue(t)),u},removeValueChangeListener(t){let a=null;for(const[o,u]of this.$listener.listenData.entries())if(u.id===t){a=o;break}typeof a=="string"?this.$listener.listenData.delete(a):console.warn("没有找到对应的监听器");},triggerMenuValueChange(t,a,o){if(this.$listener.listenData.has(t)){let u=this.$listener.listenData.get(t);if(typeof u.callback=="function"){let n=this.getValue(t),i=n,r=n;typeof a<"u"&&arguments.length>1&&(i=a),typeof o<"u"&&arguments.length>2&&(r=o),u.callback(t,r,i);}}},hasKey(t){let a=A(I,{});return t in a},execMenu(t,a,o=!1,u){if(!(typeof t=="string"||typeof t=="object"&&Array.isArray(t)))throw new TypeError("key 必须是字符串或者字符串数组");let n=[];typeof t=="object"&&Array.isArray(t)?n=[...t]:n.push(t);let i;for(let r=0;r<n.length;r++){const d=n[r];if(!this.$data.data.has(d)){M.warn(`${t} 键不存在`);return}let c=l.getValue(d);if(o&&(c=!c),typeof u=="function"){let p=u(d,c);typeof p=="boolean"&&(c=p);}if(!c)break;i=c;}i&&a(i);},execMenuOnce(t,a,o,u,n){if(typeof t!="string")throw new TypeError("key 必须是字符串");if(!this.$data.data.has(t)){M.warn(`${t} 键不存在`);return}if(this.$data.oneSuccessExecMenu.has(t))return;this.$data.oneSuccessExecMenu.set(t,1);let i=()=>{let f=l.getValue(t);return typeof o=="function"?o(t,f):f},r=[],d=f=>{let w=i(),m=[];if(f instanceof HTMLStyleElement?m=[f]:Array.isArray(f)&&(m=[...f.filter(k=>k!=null&&k instanceof HTMLStyleElement)]),w)r=r.concat(m);else for(let k=0;k<m.length;k++)m[k].remove(),m.splice(k,1),k--;},c=f=>typeof n=="function"?n(t,f):f,p=f=>{let w=[];if(c(f)){let m=a(f,d);m instanceof HTMLStyleElement?w=[m]:Array.isArray(m)&&(w=[...m.filter(k=>k!=null&&k instanceof HTMLStyleElement)]);}for(let m=0;m<r.length;m++)r[m].remove(),r.splice(m,1),m--;r=[...w];};this.addValueChangeListener(t,(f,w,m)=>{let k=m;typeof u=="function"&&(k=u(f,m,w)),p(k);});let s=i();s&&p(s);},execInheritMenuOnce(t,a,o,u){let n=this;const i=(r,d)=>{let c=n.getValue(r),p=n.getValue(d);if(typeof u=="function"){let s=u(c,p);if(s!=null)return s}return c};this.execMenuOnce(t,o,()=>i(t,a),()=>i(t,a)),this.execMenuOnce(a,()=>{},()=>!1,()=>(this.triggerMenuValueChange(t),!1));},onceExec(t,a){if(typeof t!="string")throw new TypeError("key 必须是字符串");this.$data.onceExec.has(t)||(a(),this.$data.onceExec.set(t,1));},showPanel(){Z.panel({title:{text:`${Y}-设置`,position:"center",html:!1,style:""},content:this.getPanelContentConfig(),mask:{enable:!0,clickEvent:{toClose:!0,toHide:!1}},width:K.setting.width,height:K.setting.height,drag:!0,only:!0,zIndex(){let t=B.getMaxZIndex(),a=Z.config.InstanceUtils.getPopsMaxZIndex().zIndex;return B.getMaxValue(t,a)+100},style:`
				aside.pops-panel-aside{
					width: 20%;
				}
				.plugin-anchor{
					text-decoration: none;
					display: inline-flex;
    				vertical-align: text-bottom;
				}
			`});},getPanelContentConfig(){return [ye,ke,be,Ve,xe]}},R={evalPlugin:(...t)=>{if(t.length===0)return;const a=t.join(`
`);return C.eval(`
(()=>{
	try{
		var exports=void 0;
	}catch(error){
		console.warn(error);
	}

	try{
		var module=void 0;
	}catch(error){
		console.warn(error);
	}

	try{
		var define=void 0;
	}catch(error){
		console.warn(error);
	}
		
	${a}
		
})()
`)}},we=()=>{initEruda("Eruda",C);let t=C.Eruda||globalThis.Eruda;if(!t){alert("调试工具【eruda】注册全局失败，请反馈开发者");return}let a=[];if(l.getValue(e.eruda_panel_console.key)&&a.push("console"),l.getValue(e.eruda_panel_elements.key)&&a.push("elements"),l.getValue(e.eruda_panel_network.key)&&a.push("network"),l.getValue(e.eruda_panel_resources.key)&&a.push("resources"),l.getValue(e.eruda_panel_sources.key)&&a.push("sources"),l.getValue(e.eruda_panel_info.key)&&a.push("info"),l.getValue(e.eruda_panel_snippets.key)&&a.push("snippets"),y.eruda.version=t.version,t.init({tool:a}),_.log(`eruda当前版本：${t.version}`),_.log(`eruda项目地址：${y.eruda.homeUrl}`),_.log("eruda的全局变量名: Eruda"),l.getValue(e.eruda_plugin_Resource_erudaMonitor.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaMonitor.resource)),t.add(erudaMonitor);}catch(o){_.error("插件【eruda-monitor】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaFeatures.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaFeatures.resource)),t.add(erudaFeatures);}catch(o){_.error("插件【eruda-features】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaTiming.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaTiming.resource)),t.add(erudaTiming);}catch(o){_.error("插件【eruda-timing】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaCode.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaCode.resource)),t.add(erudaCode);}catch(o){_.error("插件【eruda-code】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaBenchmark.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaBenchmark.resource)),t.add(erudaBenchmark);}catch(o){_.error("插件【eruda-benchmark】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaGeolocation.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaGeolocation.resource)),t.add(erudaGeolocation);}catch(o){_.error("插件【eruda-geolocation】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaOrientation.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaOrientation.resource)),t.add(erudaOrientation);}catch(o){_.error("插件【eruda-orientation】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaTouches.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaTouches.resource)),t.add(erudaTouches);}catch(o){_.error("插件【eruda-touches】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaOutlinePlugin.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaOutlinePlugin.resource)),t.add(erudaOutlinePlugin);}catch(o){_.error("插件【eruda-outline-plugin】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaPixel.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaPixel.resource)),t.add(erudaPixel);}catch(o){_.error("插件【eruda-pixel】加载失败，原因：",o);}if(l.getValue(e.eruda_plugin_Resource_erudaVue.key))try{R.evalPlugin(S(e.eruda_plugin_Resource_erudaVue.resource)),t.add(erudaVue);}catch(o){_.error("插件【eruda-vue】加载失败，原因：",o);}if(l.getValue(e.eruda_auto_open_panel.key)){let o=l.getValue(e.eruda_default_show_panel_name.key,e.eruda_default_show_panel_name.defaultValue);t.show(),setTimeout(()=>{t.show(o);},250);}},Se=(t,a)=>{const o=function(){var n=0,i="vConsole-Plugin-Stats-Position";function r(){return A(i,{top:0,left:0})}function d(b,h){z(i,{left:b,top:h});}var c=document.createElement("div");let p=r();c.style.cssText=`position:fixed;top:${p.top}px;left:${p.left}px;cursor:pointer;opacity:0.9;z-index:10000`,c.addEventListener("click",function(b){b.preventDefault(),f(++n%c.children.length);},{capture:!0});function s(b){return c.appendChild(b.dom),b}function f(b){for(var h=0;h<c.children.length;h++)c.children[h].style.display=h===b?"block":"none";n=b;}function w(){Z.config.InstanceUtils.drag(c,{dragElement:c,limit:!0,extraDistance:2,moveCallBack(b,h,N){d(h,N);}});}var m=(performance||Date).now(),k=m,D=0,E=s(new o.Panel("FPS","#0ff","#002")),P=s(new o.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var $=s(new o.Panel("MB","#f08","#201"));return f(0),w(),{REVISION:16,dom:c,addPanel:s,showPanel:f,begin:function(){m=(performance||Date).now();},end:function(){D++;var b=(performance||Date).now();if(P.update(b-m,200),b>=k+1e3&&(E.update(D*1e3/(b-k),100),k=b,D=0,$)){var h=performance.memory;$.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576);}return b},update:function(){m=this.end();},domElement:c,setMode:f}};o.Panel=function(n,i,r){var d=1/0,c=0,p=Math.round,s=p(window.devicePixelRatio||1),f=80*s,w=48*s,m=3*s,k=2*s,D=3*s,E=15*s,P=74*s,$=30*s,b=document.createElement("canvas");b.width=f,b.height=w,b.style.cssText="width:80px;height:48px";var h=b.getContext("2d");return h.font="bold "+9*s+"px Helvetica,Arial,sans-serif",h.textBaseline="top",h.fillStyle=r,h.fillRect(0,0,f,w),h.fillStyle=i,h.fillText(n,m,k),h.fillRect(D,E,P,$),h.fillStyle=r,h.globalAlpha=.9,h.fillRect(D,E,P,$),{dom:b,update:function(N,oe){d=Math.min(d,N),c=Math.max(c,N),h.fillStyle=r,h.globalAlpha=1,h.fillRect(0,0,f,E),h.fillStyle=i,h.fillText(p(N)+" "+n+" ("+p(d)+"-"+p(c)+")",m,k),h.drawImage(b,D+s,E,P-s,$,D,E,P-s,$),h.fillRect(D+P-s,E,s,$),h.fillStyle=r,h.globalAlpha=.9,h.fillRect(D+P-s,E,s,p((1-N/oe)*$));}}};class u{constructor(i,r){V(this,"vConsole");V(this,"VConsole");V(this,"dom");V(this,"requestID");V(this,"stats");V(this,"addStyle",i=>{i==null&&(i=document.head||document.body||document.documentElement);const r=document.createElement("style");r.setAttribute("type","text/css"),r.innerHTML=`
            .vc-stats-button{
                margin: 10px 10px;
                background-color: #fbf9fe;
                padding: 2px 4px;
                cursor: pointer;
                border-radius: 4px;
                border: 1px solid;
            }
            .vc-button-container{
                display: flex;
                align-items: center;
            }
            .vc-description{
                display: flex;
                flex-direction: column;
            }
            .vc-description a.vc-link{
                color: blue;
            }`,i.appendChild(r);});V(this,"show",()=>{this.stats||(this.stats=new o,this.stats.showPanel(1),this.dom=this.stats.dom,document.body.appendChild(this.dom),this.requestID=requestAnimationFrame(this.loop));});V(this,"changePanel",i=>{this.stats||this.show(),this.stats.setMode(Number(i));});V(this,"loop",()=>{this.stats.update(),this.requestID=requestAnimationFrame(this.loop);});V(this,"close",()=>{this.requestID&&cancelAnimationFrame(this.requestID),this.dom&&document.body.removeChild(this.dom),this.stats=null,this.requestID=null,this.dom=null;});return this.vConsole=i,this.VConsole=r,this.dom=null,this.requestID=null,this.stats=null,this.init()}init(){this.addStyle();const i=new this.VConsole.VConsolePlugin("Stats","Stats");return i.on("ready",()=>{document.querySelectorAll(".vc-stats-buttons").forEach(r=>{r.addEventListener("click",d=>{const c=d.target.dataset.type;if(c.toString()==="2"&&!(self.performance&&self.performance.memory)){_.error("浏览器不支持window.performance或者window.performance.memory");return}this.changePanel(c);});});}),i.on("renderTab",r=>{r(`
                <div class="vc-stats-buttons">
                    <div class="vc-button-container">
                        <button class="vc-stats-button" data-type="0">show FPS</button>
                        <div class="vc-description">
                        <span>最后一秒渲染的帧。数字越高越好</span>
                        </div>
                    </div>
                    <div class="vc-button-container">
                        <button class="vc-stats-button" data-type="1">show MS</button>
                        <div class="vc-description">
                        <span>渲染帧所需的毫秒数。数字越低越好</span>
                        </div>
                    </div>
                    <div class="vc-button-container">
                        <button class="vc-stats-button" data-type="2">show MB</button>
                        <div class="vc-description">
                        <span>内存分配(MB)</span>
                        <a class="vc-link" href="https://caniuse.com/mdn-api_performance_memory" target="_blank">performance.memory兼容性查看</a>
                        <span>Chrome启用方式: --enable-precise-memory-info</span>
                        </div>
                    </div>
                </div>`);}),i.on("addTool",r=>{const d=[{name:"Show Stats",onClick:this.show},{name:"Close Stats",onClick:this.close}];r(d);}),this.vConsole.addPlugin(i),i}}return new u(t,a)},Re=(t,a)=>{class o{constructor(n,i,r){V(this,"vConsole");V(this,"VConsole");V(this,"$");V(this,"dom");V(this,"logItemSelector");V(this,"funDownload",(n,i)=>{var r=document.createElement("a");r.download=i,r.style.display="none";var d=new Blob([n]);r.href=URL.createObjectURL(d),document.body.appendChild(r),r.click(),document.body.removeChild(r);});V(this,"getAllLogContent",()=>{let n=document.querySelectorAll(this.logItemSelector),i="";for(let r=0;r<n.length;r++){const d=n[r];i+=`${d.textContent}
`;}return i});V(this,"export",()=>{let n=this.getAllLogContent();this.funDownload(n,`${new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString()}.log`);});V(this,"copyText",()=>{let n=this.getAllLogContent();v.setClip(n);});return this.vConsole=n,this.VConsole=i,this.$=n.$,this.dom=null,this.logItemSelector=r||".vc-content #__vc_plug_default .vc-log-row",this.init()}init(){const n=new this.VConsole.VConsolePlugin("exportLog","exportLog");return n.on("ready",()=>{_.log("[vConsole-exportlog-plugin] -- load");}),n.on("renderTab",i=>{i('<div class="vconsole-exportlog"></div>');}),n.on("addTool",i=>{const r=[{name:"exportLogs",onClick:this.export},{name:"copyLogs",onClick:this.copyText}];i(r);}),this.vConsole.addPlugin(n),n}}return new o(t,a)},Te=()=>{initVConsole("VConsole",C);let t=C.VConsole||globalThis.VConsole;if(!t){alert("调试工具【vConsole】注册全局失败，请反馈开发者");return}let a=[];l.getValue(e.vConsole_panel_system.key)&&a.push("system"),l.getValue(e.eruda_panel_network.key)&&a.push("network"),l.getValue(e.eruda_panel_elements.key)&&a.push("element"),l.getValue(e.vConsole_panel_storage.key)&&a.push("storage"),l.getValue(e.vConsole_theme.key)==="auto"?v.isThemeDark():l.getValue(e.vConsole_theme.key);let o=[];l.getValue(e.vConsole_storage_defaultStorages_cookies.key)&&o.push("cookies"),l.getValue(e.vConsole_storage_defaultStorages_localStorage.key)&&o.push("localStorage"),l.getValue(e.vConsole_storage_defaultStorages_sessionStorage.key)&&o.push("sessionStorage");let u=new t({defaultPlugins:a,theme:"light",onReady(){l.getValue(e.vconsole_auto_open_panel.key)&&u.show();},disableLogScrolling:l.getValue(e.vconsole_disableLogScrolling.key),log:{maxLogNumber:l.getValue(e.vconsole_maxLogNumber.key,e.vconsole_maxLogNumber.defaultValue),showTimestamps:l.getValue(e.vconsole_showTimestamps.key),maxNetworkNumber:l.getValue(e.vconsole_maxNetworkNumber.key,e.vconsole_maxNetworkNumber.defaultValue)},storage:{defaultStorages:o}});if(y.vConsole.version=u.version,C.vConsole=u,_.log(`VConsole当前版本：${u.version}`),_.log(`VConsole项目地址：${y.vConsole.homeUrl}`),_.log("VConsole的实例化的全局变量名: vConsole"),l.getValue(e.vConsole_plugin_Resource_vConsole_Stats.key))try{Se(u,t);}catch(n){_.error("插件【vconsole-stats-plugin】加载失败，原因：",n);}if(l.getValue(e.vConsole_plugin_Resource_vConsole_ExportLog.key))try{Re(u,t);}catch(n){_.error("插件【vconsole-outputlog-plugin】加载失败，原因：",n);}if(l.getValue(e.vConsole_plugin_Resource_vConsoleVueDevtools.key))try{R.evalPlugin(S(e.vConsole_plugin_Resource_vConsoleVueDevtools.resource)),C.vueVconsoleDevtools.initPlugin(u);}catch(n){_.error("插件【vconsole-vue-devtools-plugin】加载失败，原因：",n);}if(l.getValue(e.vconsole_auto_open_panel.key)){let n=l.getValue(e.vconsole_default_show_panel_name.key,e.vconsole_default_show_panel_name.defaultValue);u.show(),setTimeout(()=>{u.showPlugin(n);},250);}},De=()=>{let t=l.getValue(e.pagespy_api.key,e.pagespy_api.defaultValue),a=l.getValue(e.pagespy_clientOrigin.key,e.pagespy_clientOrigin.defaultValue);if(l.getValue(e.pagespy_disable_run_in_debug_client.key)){if(window.location.hostname.includes(t)){_.log("禁止在调试端运行 ==> hostname包含api");return}if(window.location.origin.includes(a)){_.log("禁止在调试端运行 ==> origin包含clientOrigin");return}}let o=new initPageSpy(C);if(!o){alert("调试工具【PageSpy】获取失败，请反馈开发者");return}let u=new o({api:t,clientOrigin:a,project:l.getValue(e.pagespy_project.key,e.pagespy_project.defaultValue),title:l.getValue(e.pagespy_title.key,e.pagespy_title.defaultValue),autoRender:l.getValue(e.pagespy_autoRender.key,e.pagespy_autoRender.defaultValue),enableSSL:l.getValue(e.pagespy_enableSSL.key,e.pagespy_enableSSL.defaultValue),offline:l.getValue(e.pagespy_offline.key,e.pagespy_offline.defaultValue),serializeData:l.getValue(e.pagespy_serializeData.key,e.pagespy_serializeData.defaultValue),useSecret:l.getValue(e.pagespy_useSecret.key,e.pagespy_useSecret.defaultValue),messageCapacity:l.getValue(e.pagespy_messageCapacity.key,e.pagespy_messageCapacity.defaultValue)});C.$pageSpy=u,_.log(u),y.pageSpy.version=C.$pageSpy.version,_.log("PageSpy全局变量：$pageSpy"),v.waitNode("#__pageSpy .page-spy-logo",1e4).then(n=>{if(!n){_.error("未找到PageSpy的按钮");return}J.on(n,"click",i=>{v.preventEvent(i);let r=document.querySelector("#__pageSpy .page-spy-modal");if(!r){_.error("未找到PageSpy的弹窗");return}r.classList.contains("show")?(r.classList.remove("show"),r.classList.add("leaving"),setTimeout(()=>{r.classList.remove("leaving");},300)):r.classList.add("show");},{capture:!0});}),v.waitNode("#__pageSpy .page-spy-modal .page-spy-content",1e4).then(n=>{if(!n){_.error("未找到PageSpy的弹窗");return}let i=J.createElement("div",{className:"page-spy-content__btn",innerHTML:"前往房间列表"}),r=J.createElement("div",{className:"page-spy-content__btn",innerHTML:"前往调试"});i.addEventListener("click",function(d){v.preventEvent(d),window.open(`${a}/#/room-list`,"_blank");},{capture:!0}),r.addEventListener("click",function(d){v.preventEvent(d),window.open(`${a}/#/devtools?${v.toSearchParamsStr({version:C.$pageSpy.name,address:C.$pageSpy.address})}`,"_blank");},{capture:!0}),n.appendChild(i),n.appendChild(r);});},Ee={$data:{get key(){return e.chii_embedded_height.key},winHeight:parseInt(window.innerHeight.toString()),get winHalfHeight(){return e.chii_embedded_height.defaultValue}},init(){let t=this.$data.winHalfHeight;this.isExistGMLocalHeight()?t=this.getGMLocalHeight():this.setGMLocalHeight(t),this.setLocalHeight(t);},getLocalHeight(){let t=Number(globalThis.localStorage.getItem(this.$data.key));return isNaN(t)?null:t},setLocalHeight(t){if(typeof t!="number")throw _.log(t),new TypeError(`${this.$data.key}的值必须是number`);let a=t.toString();globalThis.localStorage.setItem(this.$data.key,a);let o=this.getLocalHeight();(!o||o.toString()!==a)&&(globalThis.localStorage[this.$data.key]=a);},isExistGMLocalHeight(){return typeof this.getGMLocalHeight()=="number"},getGMLocalHeight(){return l.getValue(this.$data.key)},setGMLocalHeight(t){if(typeof t!="number")throw _.log(t),new TypeError(`${this.$data.key}的值必须是number`);l.setValue(this.$data.key,t);}},$e=()=>{let t=l.getValue(e.chii_debug_url.key,e.chii_debug_url.defaultValue);if(window.location.href.startsWith(t)&&l.getValue(e.chii_check_script_load.key,e.chii_disable_run_in_debug_url.defaultValue)){_.log("禁止在调试端运行 ==> href包含debugUrl");return}if(l.execMenu(e.chii_embedded_height_enable.key,()=>{Ee.init();}),l.getValue(e.chii_check_script_load.key)){let n=function(i){i.target===u&&(globalThis.alert(`调试工具【Chii】脚本加载失败
      可能原因1：CSP策略阻止了加载第三方域的js文件
      可能原因2：目标js无效`),C.removeEventListener("error",n,{capture:!0}));};C.addEventListener("error",n,{capture:!0});}let a=l.getValue(e.chii_target_js.key,e.chii_target_js.defaultValue),o=l.getValue(e.chii_script_embedded.key,e.chii_script_embedded.defaultValue),u=document.createElement("script");u.src=a,u.setAttribute("type","application/javascript"),o&&u.setAttribute("embedded","true"),(document.head||document.body||document.documentElement).appendChild(u);},j={$data:{isLoadDebugTool:!1,loadDebugToolName:void 0,iframeUrlList:[]},$ele:{hideDebugToolCSSNode:void 0},handleToolWithIframe(){if(l.isTopWindow())return !0;if(!l.getValue(e.allowRunInIframe.key))return !1;this.$data.iframeUrlList.push(window.location.href);try{top.console.log("iframe信息："+window.location.href);}catch(t){_.error(t);}return H.add({key:"iframeUrl",text:window.location.href,autoReload:!1,isStoreValue:!1,showText(t){return t},callback(){me(window.location.href,"text");}}),!0},execDebugTool(){let t=l.getValue(e.debugTool.key);t=t.toString().toLowerCase(),_.log(`网页调试：当前使用的调试工具【${t}】`),t==="vconsole"?(this.$data.isLoadDebugTool=!0,this.$data.loadDebugToolName="vconsole",Te()):t==="pagespy"?(this.$data.isLoadDebugTool=!0,this.$data.loadDebugToolName="pagespy",De()):t==="eruda"?(this.$data.isLoadDebugTool=!0,this.$data.loadDebugToolName="eruda",we()):t==="chii"?(this.$data.isLoadDebugTool=!0,this.$data.loadDebugToolName="chii",$e()):_.error("当前未配置该调试工具的运行");},registerDebugToolMenuControls(){if(!l.isTopWindow()){_.warn("不在iframe内重复添加菜单按钮");return}let t={key:"debug_tool_show_hide_control",text:"☯ 加载并显示调试工具",autoReload:!1,isStoreValue:!1,showText(o){return o},callback:o=>{a();}};const a=o=>{j.$data.isLoadDebugTool?j.$ele.hideDebugToolCSSNode?(this.showCurrentDebugTool(),t.text="🌑 隐藏调试工具",H.update(t)):(this.hideCurrentDebugTool(),t.text="🌕 显示调试工具",H.update(t)):(this.showCurrentDebugTool(),t.text="🌑 隐藏调试工具",H.update(t));};H.add(t);},isInjectDebugToolHideCSS(){return !!(this.$ele.hideDebugToolCSSNode&&document.documentElement.contains(this.$ele.hideDebugToolCSSNode))},createDebugToolHideCSS(){let t=document.createElement("style");return t.setAttribute("type","text/css"),t.setAttribute("data-from","hide-debug-tool"),t.innerHTML=`
		/* Eruda的按钮 */
        #eruda{
            display: none !important;
        }
		/* vConsole的按钮 */
        #__vconsole{
            display: none !important;
        }
		/* PageSpy的按钮 */
        #__pageSpy{
            display: none !important;
        }
		/* Chii的面板 */
        .__chobitsu-hide__ > iframe,
        .__chobitsu-hide__:has(iframe){
            display: none !important;
        }
        `,t},hideCurrentDebugTool(){this.$ele.hideDebugToolCSSNode==null&&(_.log("未创建隐藏【调试工具】的style元素 => 创建元素"),this.$ele.hideDebugToolCSSNode=this.createDebugToolHideCSS()),this.isInjectDebugToolHideCSS()||(_.log("页面不存在隐藏【调试工具】的style元素 => 添加元素"),document.documentElement.appendChild(this.$ele.hideDebugToolCSSNode));},showCurrentDebugTool(){this.$ele.hideDebugToolCSSNode&&(_.log("页面存在隐藏【调试工具】的style元素 => 移除元素"),document.documentElement.removeChild(this.$ele.hideDebugToolCSSNode),this.$ele.hideDebugToolCSSNode=void 0),this.$data.isLoadDebugTool||(_.log("尚未运行【调试工具】 => 运行调试工具"),this.execDebugTool());}},Le={init(){j.handleToolWithIframe()&&(l.getValue(e.autoLoadDebugTool.key)?j.execDebugTool():j.registerDebugToolMenuControls());}};l.init();Le.init();

})(Qmsg, DOMUtils, Utils, pops);