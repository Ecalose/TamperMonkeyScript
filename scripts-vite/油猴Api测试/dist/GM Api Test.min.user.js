// ==UserScript==
// @name         GM Api Test
// @namespace    https://github.com/WhiteSevs/TamperMonkeyScript
// @version      2024.12.10
// @author       WhiteSevs
// @description  用于测试您的油猴脚本管理器对油猴函数的支持程度
// @license      GPL-3.0-only
// @icon         data:image/png;base64,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
// @supportURL   https://github.com/WhiteSevs/TamperMonkeyScript/issues
// @match        *://*/*
// @require      https://update.greasyfork.org/scripts/494167/1413255/CoverUMD.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/utils@2.5.4/dist/index.umd.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/domutils@1.4.8/dist/index.umd.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/pops@1.9.5/dist/index.umd.js
// @require      https://fastly.jsdelivr.net/npm/qmsg@1.2.8/dist/index.umd.js
// @connect      *
// @grant        GM.addElement
// @grant        GM.addStyle
// @grant        GM.addValueChangeListener
// @grant        GM.cookie
// @grant        GM.deleteValue
// @grant        GM.deleteValues
// @grant        GM.download
// @grant        GM.getResourceText
// @grant        GM.getResourceUrl
// @grant        GM.getTab
// @grant        GM.getTabs
// @grant        GM.getValue
// @grant        GM.getValues
// @grant        GM.info
// @grant        GM.listValues
// @grant        GM.log
// @grant        GM.notification
// @grant        GM.openInTab
// @grant        GM.registerMenuCommand
// @grant        GM.removeValueChangeListener
// @grant        GM.saveTab
// @grant        GM.setClipboard
// @grant        GM.setValue
// @grant        GM.setValues
// @grant        GM.unregisterMenuCommand
// @grant        GM.webRequest
// @grant        GM.xmlHttpRequest
// @grant        GM_addElement
// @grant        GM_addStyle
// @grant        GM_addValueChangeListener
// @grant        GM_cookie
// @grant        GM_deleteValue
// @grant        GM_deleteValues
// @grant        GM_download
// @grant        GM_getResourceText
// @grant        GM_getResourceURL
// @grant        GM_getTab
// @grant        GM_getTabs
// @grant        GM_getValue
// @grant        GM_getValues
// @grant        GM_info
// @grant        GM_listValues
// @grant        GM_log
// @grant        GM_notification
// @grant        GM_openInTab
// @grant        GM_registerMenuCommand
// @grant        GM_removeValueChangeListener
// @grant        GM_saveTab
// @grant        GM_setClipboard
// @grant        GM_setValue
// @grant        GM_setValues
// @grant        GM_unregisterMenuCommand
// @grant        GM_webRequest
// @grant        GM_xmlhttpRequest
// @grant        unsafeWindow
// @run-at       document-start
// ==/UserScript==

(function (A, Y, U, j) {
	'use strict';

	var c=typeof GM<"u"?GM:void 0,E=typeof GM_addElement<"u"?GM_addElement:void 0,B=typeof GM_addStyle<"u"?GM_addStyle:void 0,Q=typeof GM_addValueChangeListener<"u"?GM_addValueChangeListener:void 0,X=typeof GM_cookie<"u"?GM_cookie:void 0,K=typeof GM_deleteValue<"u"?GM_deleteValue:void 0,ee=typeof GM_deleteValues<"u"?GM_deleteValues:void 0,te=typeof GM_download<"u"?GM_download:void 0,q=typeof GM_getResourceText<"u"?GM_getResourceText:void 0,se=typeof GM_getResourceURL<"u"?GM_getResourceURL:void 0,ae=typeof GM_getTab<"u"?GM_getTab:void 0,re=typeof GM_getTabs<"u"?GM_getTabs:void 0,w=typeof GM_getValue<"u"?GM_getValue:void 0,ne=typeof GM_getValues<"u"?GM_getValues:void 0,v=typeof GM_info<"u"?GM_info:void 0,oe=typeof GM_listValues<"u"?GM_listValues:void 0,ie=typeof GM_log<"u"?GM_log:void 0,le=typeof GM_notification<"u"?GM_notification:void 0,ue=typeof GM_openInTab<"u"?GM_openInTab:void 0,J=typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0,de=typeof GM_removeValueChangeListener<"u"?GM_removeValueChangeListener:void 0,ce=typeof GM_saveTab<"u"?GM_saveTab:void 0,fe=typeof GM_setClipboard<"u"?GM_setClipboard:void 0,D=typeof GM_setValue<"u"?GM_setValue:void 0,pe=typeof GM_setValues<"u"?GM_setValues:void 0,z=typeof GM_unregisterMenuCommand<"u"?GM_unregisterMenuCommand:void 0,ge=typeof GM_webRequest<"u"?GM_webRequest:void 0,F=typeof GM_xmlhttpRequest<"u"?GM_xmlhttpRequest:void 0,G=typeof unsafeWindow<"u"?unsafeWindow:void 0,I=window;const Me="Monkey Api Test",y=U.noConflict(),S=Y.noConflict(),_e=j,L=new y.Log(v,G.console||I.console);var W;const P=((W=v==null?void 0:v.script)==null?void 0:W.name)||Me,Z=!1;L.config({debug:Z,logMaxCount:1e3,autoClearConsole:!0,tag:!0});A.config(Object.defineProperties({html:!0,autoClose:!0,showClose:!1},{position:{get(){return M.getValue("qmsg-config-position","bottom")}},maxNums:{get(){return M.getValue("qmsg-config-maxnums",5)}},showReverse:{get(){return M.getValue("qmsg-config-showreverse",!0)}},zIndex:{get(){let e=U.getMaxZIndex(),t=j.config.InstanceUtils.getPopsMaxZIndex(e).zIndex;return U.getMaxValue(e,t)+100}}}));const me=new y.GM_Menu({GM_getValue:w,GM_setValue:D,GM_registerMenuCommand:J,GM_unregisterMenuCommand:z}),k=new y.Httpx(F);k.interceptors.request.use(e=>e);k.interceptors.response.use(void 0,e=>(L.error("拦截器-请求错误",e),e.type==="onabort"?A.warning("请求取消"):e.type==="onerror"?A.error("请求异常"):e.type==="ontimeout"?A.error("请求超时"):A.error("其它错误"),e));k.config({logDetails:Z});G.Object.defineProperty,G.Function.prototype.apply,G.Function.prototype.call,G.Element.prototype.appendChild,G.setTimeout;const $=y.addStyle.bind(y);document.querySelector.bind(document);document.querySelectorAll.bind(document);let C="";document.documentElement?document.head?document.body?C=`<html>
    <head>
	...
	</head>
    <body>
    ...
    </body>
</html>

似乎注入到页面有点慢
`:document.head.children.length?C=`<html>
	<head>
	...
	</head>
</html>
		
注入到页面很快`:C=`<html>
	<head></head>
</html>

注入到页面非常快`:C=`<html>
</html>

注入到页面超级快`:C=`document.documentElement is null
	
注入到页面超级无敌快`;const T="GM_Panel",Ge="data-init",H="data-key",N="data-default-value",ye="data-init-more-value",Ve={success:"√ ",error:"× ",warn:"!!! ",info:""},i=e=>({type:"own",getLiElementCallBack(n){let a=e(),r=S.createElement("div",{innerHTML:a.tag==null?a.text:Ve[a.tag]+a.text}),o=["support-info"];return a.tag!=null&&o.push(a.tag),S.addClass(r,o),n.appendChild(r),n},afterAddToUListCallBack(n,a){let r=e();typeof r.afterRender=="function"&&r.afterRender(a);}}),R={addBlockCSS(...e){let t=[];if(e.length!==0&&!(e.length===1&&typeof e[0]=="string"&&e[0].trim()===""))return e.forEach(n=>{Array.isArray(n)?t=t.concat(n):t.push(n);}),$(`${t.join(`,
`)}{display: none !important;}`)},setGMResourceCSS(e){let t=typeof q=="function"?q(e.keyName):"";typeof t=="string"&&t?$(t):R.addLinkNode(e.url);},async addLinkNode(e){let t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,S.ready(()=>{document.head.appendChild(t);}),t},fixUrl(e){return e=e.trim(),e.match(/^http(s|):\/\//i)||(e.startsWith("/")||(e+="/"),e=window.location.origin+e),e},escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/©/g,"&copy;").replace(/®/g,"&reg;").replace(/™/g,"&trade;").replace(/→/g,"&rarr;").replace(/←/g,"&larr;").replace(/↑/g,"&uarr;").replace(/↓/g,"&darr;").replace(/—/g,"&mdash;").replace(/–/g,"&ndash;").replace(/…/g,"&hellip;").replace(/ /g,"&nbsp;").replace(/\r\n/g,"<br>").replace(/\r/g,"<br>").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}},s={unsafeWindow(){return typeof G=="object"&&G!=null},GM(){return typeof c=="object"&&c!=null},addElement(){return typeof E=="function"},addElement_async(){return this.GM()&&typeof c.addElement=="function"},addStyle(){return typeof B=="function"},addStyle_async(){return this.GM()&&typeof c.addStyle=="function"},addValueChangeListener(){return typeof Q=="function"},addValueChangeListener_async(){return this.GM()&&typeof c.addValueChangeListener=="function"},removeValueChangeListener(){return typeof de=="function"},removeValueChangeListener_async(){return this.GM()&&typeof c.removeValueChangeListener=="function"},cookie(){return typeof X=="function"},cookie_async(){return this.GM()&&typeof c.cookie=="object"},deleteValue(){return typeof K=="function"},deleteValue_async(){return this.GM()&&typeof c.deleteValue=="function"},deleteValues(){return typeof ee=="function"},deleteValues_async(){return this.GM()&&typeof c.deleteValues=="function"},download(){return typeof te=="function"},download_async(){return this.GM()&&typeof c.download=="function"},getResourceText(){return typeof q=="function"},getResourceText_async(){return this.GM()&&typeof c.getResourceText=="function"},getResourceUrl(){return typeof se=="function"},getResourceUrl_async(){return this.GM()&&typeof c.getResourceUrl=="function"},getTab(){return typeof ae=="function"},getTab_async(){return this.GM()&&typeof c.getTab=="function"},getTabs(){return typeof re=="function"},getTabs_async(){return this.GM()&&typeof c.getTabs=="function"},getValue(){return typeof w=="function"},getValue_async(){return this.GM()&&typeof c.getValue=="function"},setValue(){return typeof D=="function"},setValue_async(){return this.GM()&&typeof c.setValue=="function"},getValues(){return typeof ne=="function"},getValues_async(){return this.GM()&&typeof c.getValues=="function"},setValues(){return typeof pe=="function"},setValues_async(){return this.GM()&&typeof c.setValues=="function"},info(){return typeof v=="object"&&v!=null},info_async(){return this.GM()&&typeof c.info=="object"},listValues(){return typeof oe=="function"},listValues_async(){return this.GM()&&typeof c.listValues=="function"},log(){return typeof ie=="function"},log_async(){return this.GM()&&typeof c.log=="function"},notification(){return typeof le=="function"},notification_async(){return this.GM()&&typeof c.notification=="function"},openInTab(){return typeof ue=="function"},openInTab_async(){return this.GM()&&typeof c.openInTab=="function"},registerMenuCommand(){return typeof J=="function"},registerMenuCommand_async(){return this.GM()&&typeof c.registerMenuCommand=="function"},unregisterMenuCommand(){return typeof z=="function"},unregisterMenuCommand_async(){return this.GM()&&typeof c.unregisterMenuCommand=="function"},saveTab(){return typeof ce=="function"},saveTab_async(){return this.GM()&&typeof c.saveTab=="function"},setClipboard(){return typeof fe=="function"},setClipboard_async(){return this.GM()&&typeof c.setClipboard=="function"},webRequest(){return typeof ge=="function"},webRequest_async(){return this.GM()&&typeof c.webRequest=="function"},xmlHttpRequest(){return typeof F=="function"},xmlHttpRequest_async(){return this.GM()&&typeof c.xmlHttpRequest=="function"}},h={$storageKey:"gm-api-test-storage-config",set(e,t){let n=window.localStorage.getItem(h.$storageKey)??"{}",a=y.toJSON(n);a[e]=t,window.localStorage.setItem(h.$storageKey,JSON.stringify(a,(r,o)=>typeof o=="function"?o.tString():o));},get(e,t){let n=window.localStorage.getItem(h.$storageKey)??"{}";return y.toJSON(n)[e]??t},delete(e){let t=window.localStorage.getItem(h.$storageKey)??"{}",n=y.toJSON(t);Reflect.deleteProperty(n,e),window.localStorage.setItem(h.$storageKey,JSON.stringify(n,(a,r)=>typeof r=="function"?r.tString():r));}},l={set(e,t){s.setValue()&&s.getValue()&&s.deleteValue()?D(e,t):h.set(e,t);},get(e,t){return s.setValue()&&s.getValue()&&s.deleteValue()?w(e,t):h.get(e,t)},delete(e){s.setValue()&&s.getValue()&&s.deleteValue()?K(e):h.delete(e);}},u={asideLastVisit:"aside-last-visit"},xe=()=>{let e=[],t=[];[{name:"unsafeWindow",isSupport:s.unsafeWindow(),leftAsideSelector:"#aside-unsafewindow"},{name:"GM",isSupport:s.GM(),leftAsideSelector:""},{name:"GM_addElement",isSupport:s.addElement(),leftAsideSelector:"#aside-GM_addElement"},{name:"GM.addElement",isSupport:s.addElement_async(),leftAsideSelector:"#aside-GM_addElement"},{name:"GM_addStyle",isSupport:s.addStyle(),leftAsideSelector:"#aside-GM_addStyle"},{name:"GM.addStyle",isSupport:s.addStyle_async(),leftAsideSelector:"#aside-GM_addStyle"},{name:"GM_download",isSupport:s.download(),leftAsideSelector:"#aside-GM_download"},{name:"GM.download",isSupport:s.download_async(),leftAsideSelector:"#aside-GM_download"},{name:"GM_getResourceText",isSupport:s.getResourceText(),leftAsideSelector:"#aside-GM_getResourceText"},{name:"GM.getResourceText",isSupport:s.getResourceText_async(),leftAsideSelector:"#aside-GM_getResourceText"},{name:"GM_getResourceURL",isSupport:s.getResourceUrl(),leftAsideSelector:"#aside-GM_getResourceURL"},{name:"GM.getResourceUrl",isSupport:s.getResourceUrl_async(),leftAsideSelector:"#aside-GM_getResourceURL"},{name:"GM_info",isSupport:s.info(),leftAsideSelector:"#aside-GM_info"},{name:"GM.info",isSupport:s.info_async(),leftAsideSelector:"#aside-GM_info"},{name:"GM_log",isSupport:s.log(),leftAsideSelector:"#aside-GM_log"},{name:"GM.log",isSupport:s.log_async(),leftAsideSelector:"#aside-GM_log"},{name:"GM_notification",isSupport:s.notification(),leftAsideSelector:"#aside-GM_notification"},{name:"GM.notification",isSupport:s.notification_async(),leftAsideSelector:"#aside-GM_notification"},{name:"GM_openInTab",isSupport:s.openInTab(),leftAsideSelector:"#aside-GM_openInTab"},{name:"GM.openInTab",isSupport:s.openInTab_async(),leftAsideSelector:"#aside-GM_openInTab"},{name:"GM_registerMenuCommand",isSupport:s.registerMenuCommand(),leftAsideSelector:"#aside-GM_registerMenuCommand"},{name:"GM.registerMenuCommand",isSupport:s.registerMenuCommand_async(),leftAsideSelector:"#aside-GM_registerMenuCommand"},{name:"GM_unregisterMenuCommand",isSupport:s.unregisterMenuCommand(),leftAsideSelector:"#aside-GM_unregisterMenuCommand"},{name:"GM.unregisterMenuCommand",isSupport:s.unregisterMenuCommand_async(),leftAsideSelector:"#aside-GM_unregisterMenuCommand"},{name:"GM_setClipboard",isSupport:s.setClipboard(),leftAsideSelector:"#aside-GM_setClipboard"},{name:"GM.setClipboard",isSupport:s.setClipboard_async(),leftAsideSelector:"#aside-GM_setClipboard"},{name:"GM_getTab",isSupport:s.getTab(),leftAsideSelector:"#aside-GM_getTab"},{name:"GM.getTab",isSupport:s.getTab_async(),leftAsideSelector:"#aside-GM_getTab"},{name:"GM_saveTab",isSupport:s.saveTab(),leftAsideSelector:"#aside-GM_saveTab"},{name:"GM.saveTab",isSupport:s.saveTab_async(),leftAsideSelector:"#aside-GM_saveTab"},{name:"GM_getTabs",isSupport:s.getTabs(),leftAsideSelector:"#aside-GM_getTabs"},{name:"GM.getTabs",isSupport:s.getTabs_async(),leftAsideSelector:"#aside-GM_getTabs"},{name:"GM_setValue",isSupport:s.setValue(),leftAsideSelector:"#aside-GM_setValue"},{name:"GM.setValue",isSupport:s.setValue_async(),leftAsideSelector:"#aside-GM_setValue"},{name:"GM_getValue",isSupport:s.getValue(),leftAsideSelector:"#aside-GM_getValue"},{name:"GM.getValue",isSupport:s.getValue_async(),leftAsideSelector:"#aside-GM_getValue"},{name:"GM_deleteValue",isSupport:s.deleteValue(),leftAsideSelector:"#aside-GM_deleteValue"},{name:"GM.deleteValue",isSupport:s.deleteValue_async(),leftAsideSelector:"#aside-GM_deleteValue"},{name:"GM_listValues",isSupport:s.listValues(),leftAsideSelector:"#aside-GM_listValues"},{name:"GM.listValues",isSupport:s.listValues_async(),leftAsideSelector:"#aside-GM_listValues"},{name:"GM_setValues",isSupport:s.setValues(),leftAsideSelector:"#aside-GM_setValues"},{name:"GM.setValues",isSupport:s.setValues_async(),leftAsideSelector:"#aside-GM_setValues"},{name:"GM_getValues",isSupport:s.getValues(),leftAsideSelector:"#aside-GM_getValues"},{name:"GM.getValues",isSupport:s.getValues_async(),leftAsideSelector:"#aside-GM_getValues"},{name:"GM_deleteValues",isSupport:s.deleteValues(),leftAsideSelector:"#aside-GM_deleteValues"},{name:"GM.deleteValues",isSupport:s.deleteValues_async(),leftAsideSelector:"#aside-GM_deleteValues"},{name:"GM_addValueChangeListener",isSupport:s.addValueChangeListener(),leftAsideSelector:"#aside-GM_addValueChangeListener"},{name:"GM.addValueChangeListener",isSupport:s.addValueChangeListener_async(),leftAsideSelector:"#aside-GM_addValueChangeListener"},{name:"GM_removeValueChangeListener",isSupport:s.removeValueChangeListener(),leftAsideSelector:"#aside-GM_removeValueChangeListener"},{name:"GM.removeValueChangeListener",isSupport:s.removeValueChangeListener_async(),leftAsideSelector:"#aside-GM_removeValueChangeListener"},{name:"GM_xmlhttpRequest",isSupport:s.xmlHttpRequest(),leftAsideSelector:"#aside-GM_xmlhttpRequest"},{name:"GM.xmlHttpRequest",isSupport:s.xmlHttpRequest_async(),leftAsideSelector:"#aside-GM_xmlhttpRequest"},{name:"GM_webRequest",isSupport:s.webRequest(),leftAsideSelector:"#aside-GM_webRequest"},{name:"GM.webRequest",isSupport:s.webRequest_async(),leftAsideSelector:"#aside-GM_webRequest"},{name:"GM_cookie",isSupport:s.cookie(),leftAsideSelector:"#aside-GM_cookie"},{name:"GM.cookie",isSupport:s.cookie_async(),leftAsideSelector:"#aside-GM_cookie"}].forEach(r=>{r.isSupport?e.push(r):t.push(r);});let a=r=>{let o=S.createElement("div",{className:"gm-api-features-item",innerHTML:`
				<div class="gm-api-features-item__label">${r.name}</div>
				<div class="gm-api-features-item__value">
					<span style="font-size: 16px; font-weight: 700;">
						<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512" fill="currentColor">
							<path d="M448 71.9c-17.3-13.4-41.5-9.3-54.1 9.1L214 344.2l-99.1-107.3c-14.6-16.6-39.1-17.4-54.7-1.8-15.6 15.5-16.4 41.6-1.7 58.1 0 0 120.4 133.6 137.7 147 17.3 13.4 41.5 9.3 54.1-9.1l206.3-301.7c12.6-18.5 8.7-44.2-8.6-57.5z" fill="#3b9f04"></path>
						</svg>
					</span>
				</div>
			`});return S.on(o,"click",d=>{if(y.preventEvent(d),y.isNotNull(r.leftAsideSelector)){let g=o.getRootNode().querySelector(r.leftAsideSelector);g&&(g.click(),g.scrollIntoView({behavior:"smooth"}));}}),o};return {id:"component-common",title:"通用",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="component-common"},callback(r){l.set(u.asideLastVisit,"component-common");},forms:[{type:"forms",text:"@run-at document-start",forms:[i(()=>({text:R.escapeHtml(C),tag:"info"}))]},{type:"forms",text:"特性",afterAddToUListCallBack(r,o){o.formHeaderDivElement.style.fontSize="1.2em",o.formHeaderDivElement.style.fontWeight="700";},forms:[]},{type:"forms",text:"不支持列表",afterAddToUListCallBack(r,o){var d;o.formHeaderDivElement.style.color="rgb(216, 30, 6)",o.formHeaderDivElement.style.fontWeight="600",t.length===0&&((d=o.formContainerListElement)==null||d.remove());},forms:[{type:"own",getLiElementCallBack(r){let o=S.createElement("div",{className:"gm-api-features-not-support"}),d=document.createDocumentFragment();return t.forEach(f=>{d.append(a(f));}),o.appendChild(d),r.appendChild(o),r}}]},{type:"forms",text:"支持列表",afterAddToUListCallBack(r,o){var d;o.formHeaderDivElement.style.fontWeight="600",e.length===0&&((d=o.formContainerListElement)==null||d.remove());},forms:[{type:"own",getLiElementCallBack(r){let o=S.createElement("div",{className:"gm-api-features-support"}),d=document.createDocumentFragment();return e.forEach(f=>{d.append(a(f));}),o.appendChild(d),r.appendChild(o),r}}]}]}},he=()=>{let e=s.unsafeWindow(),t={id:"aside-unsafewindow",title:"unsafeWindow",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="unsafewindow"},callback(n){l.set(u.asideLastVisit,"unsafewindow");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 unsafewindow",tag:"success"}:{text:"不支持 unsafewindow",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]};return e&&t.forms[1].forms.push(i(()=>{let n="test-gm-window",a=I==G;return I[n]=n,a=typeof G[n]!="string",Reflect.deleteProperty(I,n),a?{text:"window是ProxyWindow",tag:"success"}:{text:"window不是ProxyWindow，全局变量会覆盖页面",tag:"warn"}})),t},O={setting:{get width(){return window.innerWidth<550?"88vw":"550px"},get height(){return window.innerHeight<450?"70vh":"450px"}},settingBig:{get width(){return window.innerWidth<800?"92vw":"800px"},get height(){return window.innerHeight<600?"80vh":"600px"}},info:{get width(){return "350px"},get height(){return "250px"}}},Se=()=>{let e=s.addElement(),t=s.addElement_async(),n={id:"aside-GM_addElement",title:"GM_addElement",headerTitle:"GM_addElement & GM.addElement",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_addElement"},callback(a){l.set(u.asideLastVisit,"GM_addElement");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_addElement",tag:"success"}:{text:"不支持 GM_addElement",tag:"error"}),i(()=>t?{text:"支持 GM.addElement",tag:"success"}:{text:"不支持 GM.addElement",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]};return e&&n.forms[1].forms.push(i(()=>{let a=null,r=null;try{let o="GM_addElement_test_script_exec";return a=E("script",{id:o,textContent:'window.GM_addElement_test_str = "bar";'}),r=document.querySelector("#"+o),a==null?{text:"GM_addElement is not retrun element",tag:"error"}:typeof G.GM_addElement_test_str!="string"?{text:"GM_addElement script element is not work",tag:"error"}:(Reflect.deleteProperty(G,"GM_addElement_test_str"),{text:R.escapeHtml("支持添加<script>元素且执行js"),tag:"success"})}catch(o){return console.error(o),{text:"执行错误 "+o,tag:"error"}}finally{r==null||r.remove();}}),i(()=>{let a=null,r=null;try{let o="GM_addElement_test2";if(a=E(document.body,"div",{"data-src":"https://example.com/image.png",id:o}),r=document.querySelector("#"+o),!r)return {text:"不支持3个参数",tag:"error"};const d=r.attachShadow({mode:"closed"});return E(d,"style",{textContent:"div { color: black; };"}),d.querySelector("style")?a==null?{text:"传入3个参数但是返回为空",tag:"error"}:r.hasAttribute("data-src")?{text:"支持3个参数并返回元素对象",tag:"success"}:{text:"不支持设置自定义属性data-src",tag:"error"}:{text:"不支持3个参数的shadowRoot",tag:"error"}}catch(o){return console.error(o),{text:"执行错误 "+o,tag:"error"}}finally{r==null||r.remove();}})),n},be=()=>{let e=s.addStyle(),t=s.addStyle_async(),n={id:"aside-GM_addStyle",title:"GM_addStyle",headerTitle:"GM_addStyle & GM.addStyle",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_addStyle"},callback(a){l.set(u.asideLastVisit,"GM_addStyle");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_addStyle",tag:"success"}:{text:"不支持 GM_addStyle",tag:"error"}),i(()=>t?{text:"支持 GM.addStyle",tag:"success"}:{text:"不支持 GM.addStyle",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]};return e&&n.forms[1].forms.push(i(()=>{let a=null,r=null;try{return a=S.createElement("div",{id:"GM_addStyle",innerText:"GM_addStyle test"}),document.body.appendChild(a),r=B(`
                        #GM_addStyle {
                            background-color: rgb(255, 0, 0);
                        }
                    `),r==null?{text:"GM_addStyle returns is null",tag:"error"}:window.getComputedStyle(a).backgroundColor!=="rgb(255, 0, 0)"?{text:"GM_addStyle test element background is not rgb(255, 0, 0)",tag:"error"}:{text:R.escapeHtml("支持添加CSS字符串"),tag:"success"}}catch(o){return console.error(o),{text:"执行错误 "+o,tag:"error"}}finally{a==null||a.remove(),r==null||r.remove();}})),n},Te=()=>{let e=s.download(),t=s.download_async(),n={id:"aside-GM_download",title:"GM_download",headerTitle:"GM_download & GM.download",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_download"},callback(a){l.set(u.asideLastVisit,"GM_download");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_download",tag:"success"}:{text:"不支持 GM_download",tag:"error"}),i(()=>t?{text:"支持 GM.download",tag:"success"}:{text:"不支持 GM.download",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]};return e&&n.forms[1].forms.push(i(()=>({text:R.escapeHtml("TODO..."),tag:"info",afterRender(a){var r;(r=a.target)==null||r.querySelector(".support-info");}}))),n},we=()=>{let e=s.getResourceText(),t=s.getResourceText_async();return {id:"aside-GM_getResourceText",title:"GM_getResourceText",headerTitle:"GM_getResourceText & GM.getResourceText",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_getResourceText"},callback(a){l.set(u.asideLastVisit,"GM_getResourceText");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_getResourceText",tag:"success"}:{text:"不支持 GM_getResourceText",tag:"error"}),i(()=>t?{text:"支持 GM.getResourceText",tag:"success"}:{text:"不支持 GM.getResourceText",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Ce=()=>{let e=s.getResourceUrl(),t=s.getResourceUrl_async();return {id:"aside-GM_getResourceURL",title:"GM_getResourceURL",headerTitle:"GM_getResourceURL & GM.getResourceUrl",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_getResourceURL"},callback(a){l.set(u.asideLastVisit,"GM_getResourceURL");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_getResourceURL",tag:"success"}:{text:"不支持 GM_getResourceURL",tag:"error"}),i(()=>t?{text:"支持 GM.getResourceUrl",tag:"success"}:{text:"不支持 GM.getResourceUrl",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Le=()=>{let e=s.info(),t=s.info_async();return {id:"aside-GM_info",title:"GM_info",headerTitle:"GM_info & GM.info",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_info"},callback(a){l.set(u.asideLastVisit,"GM_info");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_info",tag:"success"}:{text:"不支持 GM_info",tag:"error"}),i(()=>t?{text:"支持 GM.info",tag:"success"}:{text:"不支持 GM.info",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},ve=()=>{let e=s.log(),t=s.log_async(),n={id:"aside-GM_log",title:"GM_log",headerTitle:"GM_log & GM.log",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_log"},callback(a){l.set(u.asideLastVisit,"GM_log");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_log",tag:"success"}:{text:"不支持 GM_log",tag:"error"}),i(()=>t?{text:"支持 GM.log",tag:"success"}:{text:"不支持 GM.log",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]};return e&&n.forms[1].forms.push(i(()=>({text:R.escapeHtml("TODO..."),tag:"info",afterRender(a){var r;(r=a.target)==null||r.querySelector(".support-info");}}))),n},Re=()=>{let e=s.notification(),t=s.notification_async();return {id:"aside-GM_notification",title:"GM_notification",headerTitle:"GM_notification & GM.notification",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_notification"},callback(a){l.set(u.asideLastVisit,"GM_notification");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_notification",tag:"success"}:{text:"不支持 GM_notification",tag:"error"}),i(()=>t?{text:"支持 GM.notification",tag:"success"}:{text:"不支持 GM.notification",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Ae=()=>{let e=s.openInTab(),t=s.openInTab_async();return {id:"aside-GM_openInTab",title:"GM_openInTab",headerTitle:"GM_openInTab & GM.openInTab",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_openInTab"},callback(a){l.set(u.asideLastVisit,"GM_openInTab");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_openInTab",tag:"success"}:{text:"不支持 GM_openInTab",tag:"error"}),i(()=>t?{text:"支持 GM.openInTab",tag:"success"}:{text:"不支持 GM.openInTab",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},De=()=>{let e=s.registerMenuCommand(),t=s.registerMenuCommand_async();return {id:"aside-GM_registerMenuCommand",title:"GM_registerMenuCommand",headerTitle:"GM_registerMenuCommand & GM.registerMenuCommand",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_registerMenuCommand"},callback(a){l.set(u.asideLastVisit,"GM_registerMenuCommand");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_registerMenuCommand",tag:"success"}:{text:"不支持 GM_registerMenuCommand",tag:"error"}),i(()=>t?{text:"支持 GM.registerMenuCommand",tag:"success"}:{text:"不支持 GM.registerMenuCommand",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Ee=()=>{let e=s.unregisterMenuCommand(),t=s.unregisterMenuCommand_async();return {id:"aside-GM_unregisterMenuCommand",title:"GM_unregisterMenuCommand",headerTitle:"GM_unregisterMenuCommand & GM.unregisterMenuCommand",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_unregisterMenuCommand"},callback(a){l.set(u.asideLastVisit,"GM_unregisterMenuCommand");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_unregisterMenuCommand",tag:"success"}:{text:"不支持 GM_unregisterMenuCommand",tag:"error"}),i(()=>t?{text:"支持 GM.unregisterMenuCommand",tag:"success"}:{text:"不支持 GM.unregisterMenuCommand",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Ie=()=>{let e=s.setClipboard(),t=s.setClipboard_async();return {id:"aside-GM_setClipboard",title:"GM_setClipboard",headerTitle:"GM_setClipboard & GM.setClipboard",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_setClipboard"},callback(a){l.set(u.asideLastVisit,"GM_setClipboard");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_setClipboard",tag:"success"}:{text:"不支持 GM_setClipboard",tag:"error"}),i(()=>t?{text:"支持 GM.setClipboard",tag:"success"}:{text:"不支持 GM.setClipboard",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Ue=()=>{let e=s.getTab(),t=s.getTab_async();return {id:"aside-GM_getTab",title:"GM_getTab",headerTitle:"GM_getTab & GM.getTab",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_getTab"},callback(a){l.set(u.asideLastVisit,"GM_getTab");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_getTab",tag:"success"}:{text:"不支持 GM_getTab",tag:"error"}),i(()=>t?{text:"支持 GM.getTab",tag:"success"}:{text:"不支持 GM.getTab",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},qe=()=>{let e=s.saveTab(),t=s.saveTab_async();return {id:"aside-GM_saveTab",title:"GM_saveTab",headerTitle:"GM_saveTab & GM.saveTab",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_saveTab"},callback(a){l.set(u.asideLastVisit,"GM_saveTab");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_saveTab",tag:"success"}:{text:"不支持 GM_saveTab",tag:"error"}),i(()=>t?{text:"支持 GM.saveTab",tag:"success"}:{text:"不支持 GM.saveTab",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},ke=()=>{let e=s.getTabs(),t=s.getTabs_async();return {id:"aside-GM_getTabs",title:"GM_getTabs",headerTitle:"GM_getTabs & GM.getTabs",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_getTabs"},callback(a){l.set(u.asideLastVisit,"GM_getTabs");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_getTabs",tag:"success"}:{text:"不支持 GM_getTabs",tag:"error"}),i(()=>t?{text:"支持 GM.getTabs",tag:"success"}:{text:"不支持 GM.getTabs",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Pe=()=>{let e=s.setValue(),t=s.setValue_async();return {id:"aside-GM_setValue",title:"GM_setValue",headerTitle:"GM_setValue & GM.setValue",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_setValue"},callback(a){l.set(u.asideLastVisit,"GM_setValue");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_setValue",tag:"success"}:{text:"不支持 GM_setValue",tag:"error"}),i(()=>t?{text:"支持 GM.setValue",tag:"success"}:{text:"不支持 GM.setValue",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},$e=()=>{let e=s.getValue(),t=s.getValue_async();return {id:"aside-GM_getValue",title:"GM_getValue",headerTitle:"GM_getValue & GM.getValue",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_getValue"},callback(a){l.set(u.asideLastVisit,"GM_getValue");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_getValue",tag:"success"}:{text:"不支持 GM_getValue",tag:"error"}),i(()=>t?{text:"支持 GM.getValue",tag:"success"}:{text:"不支持 GM.getValue",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},He=()=>{let e=s.deleteValue(),t=s.deleteValue_async();return {id:"aside-GM_deleteValue",title:"GM_deleteValue",headerTitle:"GM_deleteValue & GM.deleteValue",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_deleteValue"},callback(a){l.set(u.asideLastVisit,"GM_deleteValue");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_deleteValue",tag:"success"}:{text:"不支持 GM_deleteValue",tag:"error"}),i(()=>t?{text:"支持 GM.deleteValue",tag:"success"}:{text:"不支持 GM.deleteValue",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Ne=()=>{let e=s.listValues(),t=s.listValues_async();return {id:"aside-GM_listValues",title:"GM_listValues",headerTitle:"GM_listValues & GM.listValues",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_listValues"},callback(a){l.set(u.asideLastVisit,"GM_listValues");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_listValues",tag:"success"}:{text:"不支持 GM_listValues",tag:"error"}),i(()=>t?{text:"支持 GM.listValues",tag:"success"}:{text:"不支持 GM.listValues",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Oe=()=>{let e=s.setValues(),t=s.setValues_async();return {id:"aside-GM_setValues",title:"GM_setValues",headerTitle:"GM_setValues & GM.setValues",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_setValues"},callback(a){l.set(u.asideLastVisit,"GM_setValues");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_setValues",tag:"success"}:{text:"不支持 GM_setValues",tag:"error"}),i(()=>t?{text:"支持 GM.setValues",tag:"success"}:{text:"不支持 GM.setValues",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},We=()=>{let e=s.getValues(),t=s.getValues_async();return {id:"aside-GM_getValues",title:"GM_getValues",headerTitle:"GM_getValues & GM.getValues",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_getValues"},callback(a){l.set(u.asideLastVisit,"GM_getValues");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_getValues",tag:"success"}:{text:"不支持 GM_getValues",tag:"error"}),i(()=>t?{text:"支持 GM.getValues",tag:"success"}:{text:"不支持 GM.getValues",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},je=()=>{let e=s.deleteValues(),t=s.deleteValues_async();return {id:"aside-GM_deleteValues",title:"GM_deleteValues",headerTitle:"GM_deleteValues & GM.deleteValues",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_deleteValues"},callback(a){l.set(u.asideLastVisit,"GM_deleteValues");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_deleteValues",tag:"success"}:{text:"不支持 GM_deleteValues",tag:"error"}),i(()=>t?{text:"支持 GM.deleteValues",tag:"success"}:{text:"不支持 GM.deleteValues",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Be=()=>{let e=s.addValueChangeListener(),t=s.addValueChangeListener_async();return {id:"aside-GM_addValueChangeListener",title:"GM_addValueChangeListener",headerTitle:"GM_addValueChangeListener & GM.addValueChangeListener",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_addValueChangeListener"},callback(a){l.set(u.asideLastVisit,"GM_addValueChangeListener");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_addValueChangeListener",tag:"success"}:{text:"不支持 GM_addValueChangeListener",tag:"error"}),i(()=>t?{text:"支持 GM.addValueChangeListener",tag:"success"}:{text:"不支持 GM.addValueChangeListener",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Ke=()=>{let e=s.removeValueChangeListener(),t=s.removeValueChangeListener_async();return {id:"aside-GM_removeValueChangeListener",title:"GM_removeValueChangeListener",headerTitle:"GM_removeValueChangeListener & GM.removeValueChangeListener",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_removeValueChangeListener"},callback(a){l.set(u.asideLastVisit,"GM_removeValueChangeListener");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_removeValueChangeListener",tag:"success"}:{text:"不支持 GM_removeValueChangeListener",tag:"error"}),i(()=>t?{text:"支持 GM.removeValueChangeListener",tag:"success"}:{text:"不支持 GM.removeValueChangeListener",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Je=()=>{let e=s.xmlHttpRequest(),t=s.xmlHttpRequest_async();return {id:"aside-GM_xmlhttpRequest",title:"GM_xmlhttpRequest",headerTitle:"GM_xmlhttpRequest & GM.xmlHttpRequest",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_xmlhttpRequest"},callback(a){l.set(u.asideLastVisit,"GM_xmlhttpRequest");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_xmlhttpRequest",tag:"success"}:{text:"不支持 GM_xmlhttpRequest",tag:"error"}),i(()=>t?{text:"支持 GM.xmlHttpRequest",tag:"success"}:{text:"不支持 GM.xmlHttpRequest",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},ze=()=>{let e=s.webRequest(),t=s.webRequest_async();return {id:"aside-GM_webRequest",title:"GM_webRequest",headerTitle:"GM_webRequest & GM.webRequest",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_webRequest"},callback(a){l.set(u.asideLastVisit,"GM_webRequest");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_webRequest",tag:"success"}:{text:"不支持 GM_webRequest",tag:"error"}),i(()=>t?{text:"支持 GM.webRequest",tag:"success"}:{text:"不支持 GM.webRequest",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]}},Fe=()=>{let e=s.cookie(),t=s.cookie_async(),n=t&&typeof c.cookie.list=="function",a=t&&typeof c.cookie.set=="function",r=t&&typeof c.cookie.delete=="function",o={id:"aside-GM_cookie",title:"GM_cookie",headerTitle:"GM_cookie & GM.cookie",scrollToDefaultView:!0,isDefault(){return l.get(u.asideLastVisit)==="GM_cookie"},callback(f){l.set(u.asideLastVisit,"GM_cookie");},forms:[{type:"forms",text:"函数测试",forms:[i(()=>e?{text:"支持 GM_cookie",tag:"success"}:{text:"不支持 GM_cookie",tag:"error"})]},{type:"forms",text:"功能测试",forms:[]}]},d=o.forms[0].forms;return t?d.push(i(()=>n?{text:"支持 GM.cookie.list",tag:"success"}:{text:"不支持 GM.cookie.list",tag:"error"}),i(()=>a?{text:"支持 GM.cookie.set",tag:"success"}:{text:"不支持 GM.cookie.set",tag:"error"}),i(()=>r?{text:"支持 GM.cookie.delete",tag:"success"}:{text:"不支持 GM.cookie.delete",tag:"error"})):d.push(i(()=>({text:"不支持 GM.cookie",tag:"error"}))),o},M={$data:{__data:null,__oneSuccessExecMenu:null,__onceExec:null,__listenData:null,get data(){return M.$data.__data==null&&(M.$data.__data=new y.Dictionary),M.$data.__data},get oneSuccessExecMenu(){return M.$data.__oneSuccessExecMenu==null&&(M.$data.__oneSuccessExecMenu=new y.Dictionary),M.$data.__oneSuccessExecMenu},get onceExec(){return M.$data.__onceExec==null&&(M.$data.__onceExec=new y.Dictionary),M.$data.__onceExec},get scriptName(){return P},key:T,attributeKeyName:H,attributeDefaultValueName:N},$listener:{get listenData(){return M.$data.__listenData==null&&(M.$data.__listenData=new y.Dictionary),M.$data.__listenData}},init(){try{this.initPanelDefaultValue(),this.initExtensionsMenu();}catch(e){console.error(e);}},isTopWindow(){return G.top===G.self},initExtensionsMenu(){this.isTopWindow()&&me.add([{key:"show_pops_panel_setting",text:"⚙ 设置",autoReload:!1,isStoreValue:!1,showText(e){return e},callback:()=>{this.showPanel();}}]);},initPanelDefaultValue(){let e=this;function t(r){if(!r.attributes)return;let o={},d=r.attributes[H];d!=null&&(o[d]=r.attributes[N]);let f=r.attributes[Ge];if(typeof f=="function"){let V=f();if(typeof V=="boolean"&&!V)return}let g=r.attributes[ye];g&&typeof g=="object"&&Object.assign(o,g);let x=Object.keys(o);if(!x.length){L.warn(["请先配置键",r]);return}x.forEach(V=>{let _=o[V];e.$data.data.has(V)&&L.warn("请检查该key(已存在): "+V),e.$data.data.set(V,_);});}function n(r){for(let o=0;o<r.length;o++){let d=r[o];t(d);let f=d.forms;f&&Array.isArray(f)&&n(f);}}let a=this.getPanelContentConfig();for(let r=0;r<a.length;r++){let o=a[r];if(!o.forms)continue;let d=o.forms;d&&Array.isArray(d)&&n(d);}},setValue(e,t){let n=w(T,{}),a=n[e];n[e]=t,D(T,n),this.$listener.listenData.has(e)&&this.$listener.listenData.get(e).callback(e,a,t);},getValue(e,t){let a=w(T,{})[e];return a??(this.$data.data.has(e)?this.$data.data.get(e):t)},deleteValue(e){let t=w(T,{}),n=t[e];Reflect.deleteProperty(t,e),D(T,t),this.$listener.listenData.has(e)&&this.$listener.listenData.get(e).callback(e,n,void 0);},addValueChangeListener(e,t,n){let a=Math.random();return this.$listener.listenData.set(e,{id:a,key:e,callback:t}),n&&n.immediate&&t(e,this.getValue(e),this.getValue(e)),a},removeValueChangeListener(e){let t=null;for(const[n,a]of this.$listener.listenData.entries())if(a.id===e){t=n;break}typeof t=="string"?this.$listener.listenData.delete(t):console.warn("没有找到对应的监听器");},triggerMenuValueChange(e,t,n){if(this.$listener.listenData.has(e)){let a=this.$listener.listenData.get(e);if(typeof a.callback=="function"){let r=this.getValue(e),o=r,d=r;typeof t<"u"&&arguments.length>1&&(o=t),typeof n<"u"&&arguments.length>2&&(d=n),a.callback(e,d,o);}}},hasKey(e){let t=w(T,{});return e in t},execMenu(e,t,n=!1,a){if(!(typeof e=="string"||typeof e=="object"&&Array.isArray(e)))throw new TypeError("key 必须是字符串或者字符串数组");let r=[];typeof e=="object"&&Array.isArray(e)?r=[...e]:r.push(e);let o;for(let d=0;d<r.length;d++){const f=r[d];if(!this.$data.data.has(f)){L.warn(`${e} 键不存在`);return}let g=M.getValue(f);if(n&&(g=!g),typeof a=="function"){let x=a(f,g);typeof x=="boolean"&&(g=x);}if(!g)break;o=g;}o&&t(o);},execMenuOnce(e,t,n,a,r){if(typeof e!="string")throw new TypeError("key 必须是字符串");if(!this.$data.data.has(e)){L.warn(`${e} 键不存在`);return}if(this.$data.oneSuccessExecMenu.has(e))return;this.$data.oneSuccessExecMenu.set(e,1);let o=()=>{let _=M.getValue(e);return typeof n=="function"?n(e,_):_},d=[],f=_=>{let b=o(),p=[];if(_ instanceof HTMLStyleElement?p=[_]:Array.isArray(_)&&(p=[..._.filter(m=>m!=null&&m instanceof HTMLStyleElement)]),b)d=d.concat(p);else for(let m=0;m<p.length;m++)p[m].remove(),p.splice(m,1),m--;},g=_=>typeof r=="function"?r(e,_):_,x=_=>{let b=[];if(g(_)){let p=t(_,f);p instanceof HTMLStyleElement?b=[p]:Array.isArray(p)&&(b=[...p.filter(m=>m!=null&&m instanceof HTMLStyleElement)]);}for(let p=0;p<d.length;p++)d[p].remove(),d.splice(p,1),p--;d=[...b];};this.addValueChangeListener(e,(_,b,p)=>{let m=p;typeof a=="function"&&(m=a(_,p,b)),x(m);});let V=o();V&&x(V);},execInheritMenuOnce(e,t,n,a){let r=this;const o=(d,f)=>{let g=r.getValue(d),x=r.getValue(f);if(typeof a=="function"){let V=a(g,x);if(V!=null)return V}return g};this.execMenuOnce(e,n,()=>o(e,t),()=>o(e,t)),this.execMenuOnce(t,()=>{},()=>!1,()=>(this.triggerMenuValueChange(e),!1));},onceExec(e,t){if(typeof e!="string")throw new TypeError("key 必须是字符串");this.$data.onceExec.has(e)||(t(),this.$data.onceExec.set(e,1));},showPanel(){_e.panel({title:{text:`${P}-设置`,position:"center",html:!1,style:""},content:this.getPanelContentConfig(),mask:{enable:!0,clickEvent:{toClose:!0,toHide:!1}},width:O.settingBig.width,height:O.settingBig.height,drag:!0,only:!0,style:`
			.success{
				color: green;
			}
			.error{
				color: red;
			}
			.warn,.warning{
				color: orange;
			}
			.info{
				color: #909090;
			}
			.support-info{
				font-weight: bold;
			}


			.gm-api-features-not-support,
			.gm-api-features-support{
				display: flex;
				gap: 8px;
				flex-wrap: wrap;
			}
			.gm-api-features-item{
				display: flex;
				align-items: center;
				width: 200px;
    			justify-content: space-between;
				cursor: pointer;
				transition: all ease-out .1s;
				padding: 8px 16px;
				border-radius: 4px;
				font-size: 14px;
			}
			.gm-api-features-item:hover{
				box-shadow: 0 2px 5px 3px #0000001a;
			}
			.gm-api-features-item__label{
			}
			.gm-api-features-item__value span{
				display: flex;
    			align-items: center;
			}
			`});},getPanelContentConfig(){return [xe(),he(),Se(),be(),Te(),we(),Ce(),Le(),ve(),Re(),Ae(),De(),Ee(),Ie(),Ue(),qe(),ke(),Pe(),$e(),He(),Ne(),Oe(),We(),je(),Be(),Ke(),Je(),ze(),Fe()]}};M.init();M.showPanel();

})(Qmsg, DOMUtils, Utils, pops);